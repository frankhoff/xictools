
%S-----------------------------------------------------------------------------
\section{Variables}
\label{variables}

% spVariables.hlp:variables 050814

Shell variables can be set from the shell with the {\cb set} command. 
Equivalently, most of the variables that have internal meaning to
{\WRspice} can be set from variaous panels available in the {\cb
Tools} menu of the {\cb Tool Control} window.  These are the {\cb Plot
Options}, {\cb Plot Colors}, {\cb Shell Options}, {\cb Simulation
Options}, {\cb Command Options} and {\cb Debug Options} panels.  The
{\cb Variables} panel from the {\cb Tools} menu will list the
variables currently set, as will giving the {\cb set} command without
arguments.

In addition, shell variables are set which correspond to definitions
supplied on the {\vt .options} line of the current circuit, and there
are additional shell variables which are set automatically in accord
with the current plot.  In the variable listings, a `{\vt $+$}' symbol
is prepended to variables defined from a {\vt .options} line in the
current circuit, and a `{\vt $*$}' symbol is prepended to those
variables defined for the current plot.  These variable definitions
will change as the current circuit and current plot change.  Some
variables are read-only and may not be changed by the user, though
this is not indicated in the listing.

Before a simulation starts, the options from the {\vt .options} line
of the current circuit are merged with any variables of the same name
that have been set using the shell.  The default result of the merge
is that options that are booleans will be set if set in either case,
and those that take values will assume the value set through the shell
if conflicting definitions are given.  The merging behavior can be
altered by the user, as described in the section listing circuit
options (\ref{options}).  In general, variables set in the {\vt
.options} line are available for expansion in \${\it varname}
references, but do not otherwise affect the shell.

While any variable may be set, there are many shell variables that
have special meaning to {\WRspice}, which will be described.  Note the
difference between a variable and a vector --- a variable is
manipulated with the commands {\cb set} and {\cb unset}, and may be
substituted in a command line with the \${\it varname} notation.  A
vector is a numerical object that can be manipulated algebraically,
printed and plotted, etc.

%SU-------------------------------------
\subsection{Shell Variables}

% spVars_shell.hlp:shell_vars 030419

These variables control behavior of the {\WRspice} shell.  Most of
these variables can be set indirectly from the {\cb Shell Options}
tool from the {\cb Shell} button in the {\cb Tools} menu of the {\cb
Tool Control} window.

\begin{description}
\index{argc variable}
\item{\et argc}\\
This read-only variable is set to the number of arguments used to
invoke the currently executing script, including the script name. 
This can be referenced from within scripts only.

\index{argv variable}
\item{\et argv}\\
This is a read-only list of tokens from the invoking line of the
currently executing script, including the script name.  This can be
referred to within scripts only.

\index{cktvars variable}
\item{\et cktvars}\\
When this boolean variable is set with the {\cb set} command or the
{\cb Shell} tool ({\it not} in a SPICE {\vt .options} line), variables
set in the {\vt .options} line of the current circuit will be treated
the same as variables set with the {\cb set} command.

With this variable unset, the legacy behavior is maintained, i.e.,
variables set in {\vt .options} will work in variable substitution,
but will be ignored in most commands.

In releases prior to 2.2.61, when a variable is set in a {\vt
.options} line, it becomes visible almost like it was set with the
{\cb set} command, when the circuit containing the {\vt .options} line
is the current circuit.  In the variables listing ({\cb set} command
without arguments or the {\cb Variables} tool), these have a `+' in
the first column.  However, they are not part of the normal variable
database, and they only ``work'' in special cases.  For example, they
will work in variable substitution, but won't affect the defaults in
most commands, such as the {\cb plot} command.  If the same variable
is also set with {\cb set}, the {\cb set} definition will have
precedence.  The variables set with {\vt .options} can't be unset,
except by changing the current circuit.

This was confusing to the user.  If a {\vt .options} line contains an
assignment for a plot-specific variable (for example), the variable
will appear to be active when listed, but it will have no effect on
the {\cb plot} command.

It can be argued that making the circuit variables behave the same as
those set with the {\cb set} command would be an improvement.  In this
case, variables listed in the {\cb set} or {\cb Variables} tool
listing will always have effect, and one can set any variable in the
{\vt .options} line, and have it always ``work''.

On the other hand, circuit variables can't be unset, so a variable in
the current circuit would always have effect, desired or not.  Also,
changing present behavior would possibly adversely affect existing
users who expect the current behavior, and this change might break
existing scripts.

The {\et cktvars} variable gives the user control over how to handle
the circuit variables.

\index{height variable}
\item{\et height}\\
This variable sets the number of lines assumed in a page to use when
printing output to a file.  It will also be used for standard output
if for some reason {\WRspice} cannot determine the size of the
terminal window (or has no terminal window).  If not set, 66 lines
will be assumed.

\index{history variable}
\item{\et history}\\
The {\et history} variable sets the number of commands saved in
the history list.  The default is 1000.

\index{ignoreeof variable}
\item{\et ignoreeof}\\
If this boolean variable is set, the {\vt EOF} character ({\kb
Ctrl-D}) is ignored in file input.  If not set, an {\vt EOF}
character will terminate the input.  When typed as keyboard input,
{\kb Ctrl-D} prints a list of completion matches, if command
completion is in use.

\index{noaskquit variable}
\item{\et noaskquit}\\
If this variable is set, {\WRspice} will skip the exit confirmation
prompting it there are simulations in progress or unsaved data when a
{\cb quit} command has been given.

\index{nocc variable}
\item{\et nocc}\\
If this boolean variable is set, command completion will be disabled.

\index{noclobber variable}
\item{\et noclobber}\\
If this boolean variable is set, files will not be overwritten with
input/output redirection.

\index{noedit variable}
\item{\et noedit}\\
By default, command line editing is enabled in interactive mode, which
means that {\WRspice} takes control of the low level functions of the
terminal window.  This can be defeated if {\et noedit} is set.  If the
terminal window doesn't work properly with the editor, it is
recommended that ``{\vt set noedit}'' appear in the {\vt .wrspiceinit}
file.  Note that the command completion character is {\kb Tab} when
editing is on, and {\kb Esc} otherwise.

This variable is ignored under Microsoft Windows.  The editing is
always enabled in that case.

\index{noerrwin variable}
\item{\et noerrwin}\\
In interactive mode, error messages are generally printed in a
separate pop-up window.  When this variable is set, error messages
will appear in the console window instead.  This variable is
automatically set when {\WRspice} is started in JSPICE3 emulation mode
({\vt -j} command line option given).

\index{noglob variable}
\item{\et noglob}\\
If this boolean variable is set, global pattern matching using the
characters `{\vt *}', `{\vt ?}', `{\vt [}', and `{\vt ]}' is disabled. 
This variable is set by default, since `{\vt *}' is often used in
algebraic expressions.

\index{nomoremode variable}
\item{\et nomoremode}\\
If {\et nomoremode} is not set, whenever a large amount of text is
being printed to the screen (e.g., from the {\cb print} or {\cb
asciiplot} commands), the output will be stopped every screenful and
will continue when a character is typed.  The following characters
have special meaning:
\begin{quote}
\begin{tabular}{ll}
\vt q & Discard the rest of the output\\
\vt c & Print the rest of the output without pausing\\
\vt ? & Print a help message\\
\end{tabular}
\end{quote}
If {\et nomoremode} is set, all output will be printed without pauses.

\index{nonomatch variable}
\item{\et nonomatch}\\
If set, and {\et noglob} is unset and a global expression cannot be
matched, the global characters will be used literally.  If not set,
lack of a match produces an error.

\index{nosort variable}
\item{\et nosort}\\
If this boolean is set, lists of output are not sorted alphabetically.

\index{prompt variable}
\item{\et prompt}\\
This variable contains a string to use as the command prompt.  In this
string, the `!' character is replaced by the event number, and ``{\vt
-p}'' is replaced by the current directory.  If the program is reading
lines which form a part of a control block, the prompt becomes a set
of `$>$' characters, one for each level of control structure.  The
default prompt is ``{\vt \$program !  $->$ }''.

\index{revertmode variable}
\item{\et revertmode}\\
This sets up the strategy to revert keyboard focus to the terminal
window when a new window pops up, stealing focus.  This is highly
dependent on operating system/window manager.  The default auto mode
makes a guess based on the operating system.  The variable can be set
to one of the integer values below explicitly.
\begin{quote}
\begin{tabular}{ll}
0 & default ``auto'' mode.\\
1 & off, don't attempt to revert focus.\\
2 & assume older linux, e.g. RHEL6 and Gnome.\\
3 & assume newish linux, e.g., RHEL7 and KDE.\\
4 & Apple Mac.\\
5 & Microsoft Windows.\\
\end{tabular}
\end{quote}

\index{sourcepath variable}
\item{\et sourcepath}\\
This list variable contains directories to search for command scripts
or input files.  A list variable in {\WRspice} takes the form of a
list of words, surrounded by space-separated parentheses, for example
\begin{quote}\vt
( /path/to/dir1 /path/to/dir2 "/usr/bill/my files" )
\end{quote}
If a directory path contains white space, it should be quoted, as
above.

\index{unixcom variable}
\item{\et unixcom}\\
When this boolean is set, {\WRspice} will attempt to execute unrecognized
commands as operating system commands.

\item{\et width}\\
This variable sets the number of columns assumed in printed output,
when output is being directed to a file.  This will also be used for
standard output if for some reason {\WRspice} cannot determine the
width of the terminal window (or has no terminal window).  If not set,
80 columns will be assumed.

\item{\et wmfocusfix}\\
When {\WRspice} starts in interactive graphical mode from a terminal
window, the tool control window will appear above other windows, and
the keyboard focus should stay with the terminal window.  Similarly,
when the user types a command such as a plot command that brings up
another window, the new window should appear above existing windows,
and the terminal window should retain the keyboard focus.

Unfortunately, not all window managers are cooperative, or know the
protocols.  By setting this variable, a slightly more brute-force
approach is taken to keep the terminal window from losing focus.  This
may fix the problem, but in some cases this may have side-effects,
such as causing pop-up windows to appear below existing windows. 
Anyway, if the terminal window loses focus when another window pops
up, and the user finds this annoying, then setting this boolean
variable in the {\vt .wrspiceinit} file might fix the problem.

\item{\et nototop}\\
Ordinarily, the window manager is asked to raise new windows to the
top.  If this boolean variable is set, that will not happen.  This
will probably be needed when using a Windows PC X-server to run
{\WRspice}.  In Windows, it is not possible to revert the ``window on
top'' property, so that if this variable is not set, plot windows and
some others will always be shown on top of other windows.

\end{description}

%SU-------------------------------------
\subsection{Command-Specific Variables}

% spVars_cmds.hlp:command_vars 102817

These variables control the operation of specific {\WRspice} commands
and functions.  Most of these variables can be set indirectly from the
{\cb Command Options} tool from the {\cb Commands} button in the {\cb
Tools} menu of the {\cb Tool Control} window.

\begin{description}
\index{appendwrite variable}
\item{\et appendwrite}\\
When set, data written with the {\cb write} command will be appended
to the file, if the file already exists.  If not set, the
file will be overwritten.

\index{checkiterate variable}
\item{\et checkiterate}\\
This sets the binary search depth used in finding operating range
extrema in operating range analysis initiated with the {\cb check}
command.  It can be set to an integer value 0--10.  If not set or set
to zero, the search is skipped.

\index{diff\_abstol variable}
\item{\et diff\_abstol}\\
This variable sets the absolute error tolerance used by the {\cb diff}
command.  The default is 1e-12.

\index{diff\_reltol variable}
\item{\et diff\_reltol}\\
This variable sets the relative error tolerance used by the {\cb diff}
command.  The default is 1e-3.

\index{diff\_vntol variable}
\item{\et diff\_vntol}\\
This variable sets the absolute voltage tolerance used by the {\cb
diff} command.  The default is 1e-6.

\index{dollarcmt variable}
\item{\et dollarcmt}\\
This boolean variable, when set, alters the interpretation of comments
triggered by `{\vt \$}' and `{\vt ;}' characters, for compatibility
with input files intended for other simulators.

In other simulators, the `{\vt \$}' character always indicates the
start of a comment.  The `{\vt ;}' (semicolon) character is
interpreted as equivalent to `{\vt \$}' for purposes of comment
identification.  In {\WRspice}, `{\vt \$}' is used for shell variable
substitution, a feature that does not appear in other simulators and
prevents general use of `{\vt \$}' comments.  This can cause trouble
when reading files intended for other simulators.  {\WRspice} will
detect and strip ``obvious'' comments, where the `{\vt \$}' is
preceded with a backslash or surrounded by white space, but this may
not be sufficient.

Setting this variable will cause `{\vt \$}' and `{\vt ;}' to indicate
the start of a comment when reading input, if the character is
preceded by start of line, white space, or a comma, independent of
what follows the character.

\index{dpolydegree variable}
\item{\et dpolydegree}\\
This variable sets the polynomial degree used by the {\vt deriv}
function for differentiation.  If not set, the value is 2 (quadratic). 
The valid range is 0--7.

\index{editor variable}
\item{\et editor}\\
This variable is set to the name or path of the text editor to be used
within {\WRspice}.  This overrides the {\et SPICE\_EDITOR} and {\et
EDITOR} environment variables.  If no editor is set, the internal
editor {\cb xeditor} is used if graphics is available, otherwise the
{\vt vi} editor is used.

\index{errorlog variable}
\item{\et errorlog}\\
If this variable is set to a file path, all error and warning messages
will be copied to the file.  The variable can also be set as a
boolean, in which case all errors and warnings will be copied to a
file named ``{\vt wrspice.errors}'' in the current directory.  When
not set, errors that are not currently displayed in the error window
are lost.  Only the last 200 messages are retained in the error
window.

\index{filetype variable}
\item{\et filetype}\\
This variable can be set to either of the keywords {\vt ascii} or {\vt
binary}.  It determines whether ASCII or binary format is used in the
generated rawfiles, for example from the {\cb write} command.  The
default is {\vt ascii}, but this can be overridden with the
environment variable {\et SPICE\_ASCIIRAWFILE}, which is set to ``1''
(for ASCII), or ``0'' (zero, for binary).

\index{fourgridsize variable}
\item{\et fourgridsize}\\
When a {\cb fourier} command is given, the data are first interpolated
onto a linear grid.  The size of the grid is given by this variable. 
If unspecified, a size of 200 is used.

\index{helpinitxpos variable}
\item{\et helpinitxpos}\\
This variable specifies the distance in pixels from the left edge of
the screen to the left edge of the help window, when it first appears. 
If not set, the value taken is 100 pixels.

\index{helpinitypos variable}
\item{\et helpinitypos}\\
This variable specifies the distance in pixels from the top edge of
the screen to the top edge of the help window, when it first appears. 
If not set, the value taken is 100 pixels.

\index{helppath variable}
\item{\et helppath}\\
This variable specifies the search path used to locate directories
containing help database files.  This variable takes its initial value
from the {\et SPICE\_HLP\_PATH} environment variable, if set,
otherwise it assumes a built-in default ``{\vt (
/usr/local/xictools/wrspice/help )}'', or, if {\et XT\_PREFIX} is
defined in the environment, its value replaces ``{\vt /usr/local}''.

\index{modpath variable}
\item{\et modpath}\\
This list variable contains directory paths where loadable device
module files are expected to be found.  A list variable in {\WRspice}
takes the form of a list of words, surrounded by space-separated
parentheses, for example
\begin{quote}\vt
( /path/to/dir1 /path/to/dir2 "/usr/bill/my files" )
\end{quote}
If a directory path contains white space, it should be quoted, as
above.

The loadable device modules found in {\vt modpath} directories are
normally loaded automatically on program start-up.  See the
description of the {\cb devload} command in \ref{devload} for more
information.

\index{mplot\_cur variable}
\item{\et mplot\_cur}\\
This variable contains the name of the last margin analysis output
file generated.  This variable can be set, but has no effect, as the
file names are generated internally.

\index{nfreqs variable}
\item{\et nfreqs}\\
This variable specifies how many multiples of the fundamental
frequency to print in the {\cb fourier} command.  If not set, 10
values are printed.

\index{noeditwin variable}
\item{\et noeditwin}\\
If this boolean variable is set, no window is created for the text
editor.  This is desirable for editors that create their own windows.

\index{nomodload variable}
\item{\et nomodload}\\
This variable has relevance only if set in the {\vt .wrspiceinit}
file.  If set, the automatic loading of device model modules will be
suppressed.  This normally occurs after the {\vt .wrspiceinit} file
(if any) is read and processed.  This variable is set if the {\vt -m}
command line option is given.

\index{nopadding variable}
\item{\et nopadding}\\
If set, binary rawfiles with vectors of less than maximum length are
not zero padded.

\index{nopage variable}
\item{\et nopage}\\
If set, page breaks are suppressed in the {\cb print} and {\cb
asciiplot} commands.  The {\et nobreak} variable is similar, but
suppresses page breaks only in the {\cb asciiplot} command.

When given in the {\vt .options} line, page ejects are suppressed in
printed output, in batch mode.

\index{noprtitle variable}
\item{\et noprtitle}\\
In interactive mode, when a circuit file is sourced, the title line
from the circuit is printed on-screen.  If this boolean variable is
set, the title printing is suppressed, and circuit sourcing is silent
unless there are errors.  The variable can be set by checking the box
in the {\cb source} page of the {\cb Command Options} tool from the
{\cb Tools} menu.

\index{numdgt variable}
\item{\et numdgt}\\
This variable specifies the number of significant digits to print in
{\cb print}, {\cb asciiplot}, {\cb fourier}, and some other commands. 
The default precision is six digits.

This variable sets the number of significant digits printed in output
from batch mode, when used in the {\vt .options} line.

\index{printautowidth variable}
\item{\et printautowidth}\\
In column mode of the {\cb print} command, if this boolean variable is
set, the logical page width is expanded as necessary to print all
vectors, up to a hard limit of 2048 characters.

\index{printnoheader variable}
\item{\et printnoheader}\\
In column mode of the {\cb print} command, if this boolean variable is
set, the three-line header that normally appears at the top of the
first page of output is suppressed.

\index{printnoindex variable}
\item{\et printnoindex}\\
In column mode of the {\cb print} command, if this boolean variable is
set, the column of index values that normally appears to the left of
all vector data is suppressed.

\index{printnopageheader variable}
\item{\et printnopageheader}\\
In column mode of the {\cb print} command, if this boolean variable is
set, the two line page header which is normally printed at the top of
each page is omitted.

\index{printnoscale variable}
\index{noprintscale variable}
\item{\et printnoscale}\\
In column mode of the {\cb print} command, the values of the scale
vector are by default printed in the first data column of each page. 
Setting this boolean variable suppresses this.  A deprecated alias
{\et noprintscale} is also recognized, for backwards compatibility
with Spice3 and earlier {\WRspice} releases.

\index{random variable}
\item{\et random}\\
When set, the HSPICE-compatible random number functions ({\vt unif},
{\vt aunif}, {\vt gauss}, {\vt agauss}, {\vt limit}) will return
random values.  When not set and not running Monte Carlo analysis
these functions always return mean values.

This applies to the listed functions only, and not the statistical
functions in \ref{statfuncs}, and not the voltage/current source
random functions, which always produce random output.

This can be set with the {\cb set} command or in a {\vt .options} line
to enable the random functions for use in scripts, during analysis, or
working from the command line.  The random output is disabled by
default since some foundry model sets make use of random functions
intended for HSPICE Monte Carlo analysis, and this would cause big
trouble in {\WRspice}.

Warning:  with this variable set, reading in foundry models such as
those from IBM will generate random model parameters, as these models
have built-in random generation compatible with HSPICE and {\WRspice}. 
This may be exactly what you want, but if not, be forewarned.

\index{rawfile variable}
\item{\et rawfile}\\
This variable sets the default name for the data file to be produced. 
The default is as entered with the {\vt -r} command line option, or
``{\vt rawspice.raw}''.  An extension sets the file format, which can
be the native rawfile format, or the Common Simulation Data Format
(CSDF).  See the description of the {\cb write} command
(\ref{writecmd}) for more information about the formats and how they
can be specified.  In server mode (the {\vt -s} command line option
was given) data will be output in rawfile format in all cases.  The
{\vt filetype} variable is used to set whether native rawfiles are
written using ASCII or binary number representations (ASCII is the
default).

\index{rawfileprec variable}
\item{\et rawfileprec}\\
This variable sets the number of digits used to print data in an ASCII
rawfile.  The default is 15.

\index{rhost variable}
\item{\et rhost}\\
This variable specifies the name of the default machine to submit
remote simulations to.  This machine must have a {\vt wrspiced} daemon
running.  The default machine can also be specified in the {\et
SPICE\_HOST} environment variable, which will be overridden if {\et
rhost} is set.  Additional machines can be added to an internal list
with the {\cb rhost} command.  The host name can be optionally
suffixed with a colon followed by the port number to use to
communicate with the {\vt wrspiced} daemon.  The port must match that
set up by the daemon.  If not given, the port number is obtained from
the operating system for ``{\vt wrspice/tcp}'' or 6114 (the IANA
registered port number for this service) if this is not defined.

\index{rprogram variable}
\item{\et rprogram}\\
The name of the program to run when an {\cb rspice} command is given. 
If not set, the program path used will be determined as in the {\cb
aspice} command.

\index{spectrace variable}
\item{\et spectrace}\\
This enables messages to be printed during Fourier analysis with the
{\cb spec} command, for debugging purposes.

\index{specwindow variable}
\item{\et specwindow}\\
This variable is set to one of the following strings, which will
determine the type of windowing used for the Fourier transform in the
{\cb spec} command.  If not set, the default is {\vt hanning}.

\begin{tabular}{ll}
\vt bartlet & Bartlet (triangle) window\\
\vt blackman & Blackman order 2 window\\
\vt cosine & Hanning (cosine) window\\
\vt gaussian & Gaussian window\\
\vt hamming & Hamming window\\
\vt hanning & Hanning (cosine) window\\
\vt none & No windowing\\
\vt rectangular & Rectangular window\\
\vt triangle & Bartlet (triangle) window\\
\end{tabular}

\index{specwindoworder variable}
\item{\et specwindoworder}\\
This can be set to an integer in the range 2--8.  This sets the order
when the gaussian window is used in the {\cb spec} command.  If not
set, order 2 is used.

\index{spicepath variable}
\item{\et spicepath}\\
This variable can be set to a path to a simulator executable which
will be executed when asynchronous jobs are submitted with the {\cb
aspice} command.  If not set, the path used will default to the value
of the environment variable {\et SPICE\_PATH}.  If this environment
variable is not set, the path is constructed from the value of the
environment variable {\et SPICE\_EXEC\_DIR} prepended to the name of
the presently running program.  If the {\et SPICE\_EXEC\_DIR} variable
is not set, the path used is that of the presently running {\WRspice}.

\index{units variable}
\item{\et units}\\
If this variable is set to ``{\vt degrees}'', all trig functions will
use degrees instead of radians for the units of their arguments.  The
default is ``{\vt radians}''.
\end{description}

%SU-------------------------------------
\subsection{Plot Variables}
\label{plotvars}

% spVars_plot.hlp:plot_vars 080816

These variables control the numerous plotting modes and capabilities
of the {\cb plot}, {\cb hardcopy}, {\cb xgraph}, and {\cb asciiplot}
commands.  Most of these variables can be set indirectly from the
{\cb Plot Options} panel and the {\cb Colors} panel in the {\cb Tools}
menu of the {\cb Tool Control} window.

\begin{description}
\index{colorN variable}
\item{\et color}{\it N}\\
If a variable with the name ``{\vt color}{\it N\/}'' ({\it N} 1--19)
is set to the name of a color the {\it N\/}'th value used in a window
will have this color.  The value of {\vt color0} denotes the
background color and {\vt color1} denotes the grid and text color. 
The color names recognized are those found in the {\vt rgb.txt} file
in the X-window system library.  These mappings are built into
{\WRspice} and apply whether or not X is being run.  The colors can
also be set using the panel brought up by the {\cb Colors} button in
the {\cb Tools} menu, and can be set through the X-resource mechanism
(see \ref{startup}) and the {\cb setrdb} command.

The ``name'' for a color can be given in HTML-style notation:  {\vt
\#}{\it rrggbb\/}, where {\it rr}, {\it gg}, {\it bb} are the hex
values for the red, green and blue component of the color.

\index{plotstyle keyword!combplot}
\index{combplot variable}
\item{\et combplot}\\
This is a keyword of the {\et plotstyle} variable, or can be set as a
boolean.  It directs the use of a comb plot (histogram) instead of
connected points.  Each point is connected to the bottom of the plot
area by a line.

\index{curanalysis variable}
\item{\et curanalysis}\\
This read-only variable is set to the name of the analysis when
analysis starts, and retains the value until a new analysis starts. 
Possible values are
\begin{quote}
{\vt ac dc op tran tf noise disto sens}, or not set.
\end{quote}
This can be used in a {\vt .postrun} block to make actions specific to
analysis type.

Example
\begin{quote}\vt
.postrun\\
strcmp("tran", \$curanalysis)\\
if (\$? = 0)\\
\hspace*{2em}print v(1) v(2) > tranout.prn\\
end\\
.endc
\end{quote}

\index{curplot variable}
\item{\et curplot}\\
This variable holds the name of the current plot.  It can be set to
another plot name (as listed in the {\et plots} variable), which will
become the current plot.  This variable can also be set to ``{\vt
new}'', in which case a new, empty plot is created and becomes the
current plot.

\index{curplotdate variable}
\item{\et curplotdate}\\
This read-only variable contains the creation date of the current
plot.

\index{curplotname variable}
\item{\et curplotname}\\
This read-only variable contains a description of the type of
simulation which produced the current plot.  Note that this is not the
name used by the {\cb setplot} command, but rather a description of
the type of simulation done.

\index{curplottitle variable}
\item{\et curplottitle}\\
This read only variable contains the title of the circuit associated
with the current plot.

\index{gridsize variable}
\item{\et gridsize}\\
If this variable is set to an integer greater than zero and less than
or equal to 10000, this number will be used as the number of equally
spaced points to use for the X-axis when plotting in the {\cb plot}
command.  The plot data will be interpolated to these linearly spaced
points, and the use of this variable makes sense only when the raw
data are not equally spaced, as from transient analysis with the {\et
steptype} variable set to {\vt nousertp}.  Otherwise the current scale
will be used (which may not have equally spaced points).  If the
current scale isn't strictly monotonic, then this option will have no
effect.  The degree of the interpolation is given by the variable {\et
polydegree}.

\index{gridstyle variable}
\item{\et gridstyle}\\
This variable is used to determine the style of grid used by the
commands {\cb plot}, {\cb hardcopy}, and {\cb asciiplot}.  It can be
set to one of the following values:

\begin{tabular}{|l|l|}\hline
\vt lingrid & Use a linear grid\\ \hline
\vt loglog  & Use a log scales for both axes\\ \hline
\vt xlog    & Use a log scale for the X axis\\ \hline
\vt ylog    & Use a log scale for the Y axis\\ \hline
\vt polar   & Use a polar grid\\ \hline
\vt smith   & Transform data and use a Smith grid\\ \hline
\vt smithgrid   & Use a Smith grid\\ \hline
\end{tabular}

\index{scaletype keyword!group}
\index{group variable}
\item{\et group}\\
This is a keyword of the {\et scaletype} variable, or can be set as a
boolean.  It indicates the use of common scales for three categories
of data:  voltages, currents, and anything else.  Each group will have
its own Y-scale.

\index{hcopycommand variable}
\item{\et hcopycommand}\\
This variable specifies the operating system command which the {\cb
hardcopy} command will use to send a job to the printer.  If the
string contains the characters ``{\vt \%s}'', those characters will be
replaced by the name of the file being used to store the plot data,
otherwise the file name will be appended to the end of the string,
separated by a space character.  This allows reference to the file in
the middle of the string.  For example, suppose that your site has
some strange printer, but that there is a filter which converts
PostScript to a format recognized by that printer.  The command string
might be ``{\vt myfilt <\%s |lpr -Pstrange\_printer}''.  Note that
double quotes must be used in the {\cb set} command since the string
contains space:
\begin{quote}\vt
set hcopycommand = "myfilt <\%s |lpr -Pstrange\_printer"
\end{quote}

\index{hcopydriver variable}
\index{hardcopy drivers}
\item{\et hcopydriver}\\
\label{hardcopydriver}
This variable specifies the default driver to use in the {\cb
hardcopy} command.  The variable should be set to one of the following
keywords:

\begin{quote}
\begin{tabular}{|l|l|}\hline
Keyword & Description\\ \hline\hline
{\vt hp\_laser\_pcl}                & mono HP laser\\ \hline
{\vt hpgl\_line\_draw\_color}       & color HPGL\\ \hline
{\vt postscript\_bitmap}            & mono PostScript\\ \hline
{\vt postscript\_bitmap\_encoded}   & mono PostScript, compressed\\ \hline
{\vt postscript\_bitmap\_color}     & color PostScript\\ \hline
{\vt postscript\_bitmap\_color\_encoded} & color PostScript, compressed\\
  \hline
{\vt postscript\_line\_draw}        & mono PostScript, vector draw\\ \hline
{\vt postscript\_line\_draw\_color} & color PostScript\\ \hline
{\vt windows\_native}               & Microsoft Windows native\\ \hline
{\vt image}                         & tiff, gif, jpeg, png, etc. images\\
  \hline
{\vt xfig\_line\_draw\_color}       & format for the {\vt xfig} program\\
  \hline
\end{tabular}
\end{quote}

These drivers correspond to the drivers available in the format menu
of the {\cb Print} panel from the {\cb plot} windows.

For PostScript, the line draw drivers are most appropriate for SPICE
plots.  The bitmap formats will work, but are less efficient for
simple line drawings.  More information on these drivers can be found
in \ref{printdrivers}.

If this variable is set to one of these formats, {\cb Print} panels
from new plot windows will have this format set initially. 
Otherwise, the initial format will be the first item in the format
menu, or the last format selected from any plot window.

\index{hcopyheight variable}
\item{\et hcopyheight}\\
This variable sets the default height of the image on the page, as
measured in portrait orientation, used by the {\cb hardcopy} command.  It is
specified as a floating point number representing inches, unless
followed by ``cm'' (without space) which indicates centimeters.  The
default is typically 10.5 inches, but this is driver dependent.

\index{hcopylandscape variable}
\item{\et hcopylandscape}\\
This boolean variable, used by the {\cb hardcopy} command, will cause plots
to be printed in landscape orientation when set.

\index{hcopyresol variable}
\item{\et hcopyresol}\\
This variable sets the default resolution used by the driver to
generate hardcopy data in the {\cb hardcopy} command.  In almost all
cases, the default resolution which is achieved by not setting this
variable is the best choice.  One case where this may not be true is
with the {\vt hp\_laser\_pcl} driver, where the choices are 75, 100,
150, and 300 (default 150).

\index{hcopyrmdelay variable}
\item{\et hcopyrmdelay}\\
When a plot or page is printed, a temporary file is produced in a
system directory ({\vt /tmp} by default), and by default this file is
not removed.  There does not appear to be a portable way to know when
a print job is finished, or to know whether the print spooler requires
the existence of the file to be printed after the job is queued, thus
the default action is to not perform any cleanup.

If this variable is set to an integer value larger than 0, it will
specify that a temporary print file is to be deleted this many minutes
after creation.

The {\vt at} command, available on all Unix/Linux/OS X platforms (but
not Windows) is used to schedule deletion, which will occur whether or
not {\WRspice} is still running.  For this to work, the user must have
permission to use {\vt at}.  See ``{\vt man at}'' for more
information.

This variable can also be set from the {\cb hardcopy} page in the {\cb
Plot Options} tool from the {\cb Tools} menu of the {\cb Tool Control}
window, in Unix/Linux/OS X releases.

\index{hcopywidth variable}
\item{\et hcopywidth}\\
This variable sets the default width of the image on the page, as
measured in portrait orientation, used by the {\cb hardcopy} command. 
It is specified as a floating point number representing inches, unless
followed by ``cm'' (without space) which indicates centimeters.  The
default is typically 8.0 inches, but this is driver dependent.

\index{hcopyxoff variable}
\item{\et hcopyxoff}\\
This variable sets the distance of the image from the left edge of the
page, viewed in portrait orientation, used by the {\cb hardcopy}
command.  It is specified as a floating point number representing
inches, unless followed by ``cm'' (without space) which indicates
centimeters.  The default is typically 0.25 inches, but this is driver
dependent.

\index{hcopyyoff variable}
\item{\et hcopyyoff}\\
This variable sets the vertical position of the image on the page,
viewed in portrait orientation, used by the {\cb hardcopy} command. 
Some drivers measure this distance from the top of the page, others
from the bottom.  This is a consequence of the internal coordinate
systems used by the drivers, and the lack of assumption of a
particular page size.  The offset is specified as a floating point
number representing inches, unless followed by ``cm'' (without space)
which indicates centimeters.  The default is typically 0.25 inches,
but this is driver dependent.

\index{gridstyle keyword!lingrid}
\index{lingrid variable}
\item{\et lingrid}\\
This is a keyword of the {\et gridstyle} variable, or can be set as a
boolean.  It specifies use of a linear grid.  This is the default grid
type.

\index{plotstyle keyword!lineplot}
\index{linplot variable}
\item{\et linplot}\\
This is a keyword of the {\et plotstyle} variable, or can be set as a
boolean.  It specifies the display of plot data as points connected by
lines.  This is the default.

\index{gridstyle keyword!loglog}
\index{loglog variable}
\item{\et loglog}\\
This is a keyword of the {\et gridstyle} variable, or can be set as a
boolean.  It specifies use of a log-log grid.

\index{scaletype keyword!multi}
\index{multi variable}
\item{\et multi}\\
This is a keyword of the {\et scaletype} variable, or can be set as a
boolean.  It indicates the use of separate Y-scales for each trace of
the plot (the default).

\index{nobreak variable}
\item{\et nobreak}\\
If set, suppress page breaks when doing an {\cb asciiplot}.  The {\et
nopage} variable is similar, but suppresses page breaks in both the
{\cb asciiplot} and {\cb print} commands.

\index{noasciiplotvalue variable}
\item{\et noasciiplotvalue}\\
If set, suppress printing the value of the first variable plotted with
{\cb asciiplot} on the left side of the graph.

\index{nogrid variable}
\item{\et nogrid}\\
Setting this boolean variable specifies plotting without use of a
grid.  The data will be plotted with only the border lines at the
bottom and left sides of the plotting area.

\index{nointerp variable}
\item{\et nointerp}\\
This variable is used only by the {\cb asciiplot} command.  Normally
{\cb asciiplot} interpolates data onto a linear scale before plotting
it.  If this option is given this won't be done --- each line will
correspond to one data point as generated by the simulation.  Since
data are already linearized unless from a transient analysis with {\et
steptype} set to {\vt nousertp}, setting this variable will avoid a
redundant linearization.

\index{noplotlogo variable}
\item{\et noplotlogo}\\
When set, the {\WRspice} logo is not shown in plots and hard-copies.

\index{plotgeom variable}
\item{\et plotgeom}\\
This variable sets the size of subsequently created plot windows.  It
can be set as a string {\vt "}{\it wid hei}{\vt "} or as a list {\vt
(} {\it wid hei} {\vt )}.  The {\it wid} and {\it hei} are the width
and height in pixels.

For Microsoft Windows, the default (when {\et plotgeom} is unset)
width and height are 500, 300 and these apply to the whole window. 
Due to Microsoft's silly and unnecessary conversion to ``dialog
units'', the actual pixel size may be slightly different.

For others, the default width and height are 400, 300 and these 
apply to the plotting area only.

The acceptable numbers for the width and height are 100---2000.  In    
the string form, a non-numeric character can separate the two
numbers, e.g., {\vt "300x400"} is ok.

\index{plotposn variable}
\item{\et plotposn{\it N}}\\
This variable can be used to set the screen position of the {\it N\/}'th
plot window.  It can be specified as a list, as
\begin{quote}
{\vt set plotposn0 = ( 100 200 )}
\end{quote}
or as a string, as in
\begin{quote}
{\vt set plotposn2 = "150 250"}.
\end{quote}
The {\it N} can range from 0--15.  If not set, the plots are
positioned by an internal algorithm.

\index{plots variable}
\item{\et plots}\\
This list variable is read-only, and contains the names of the plots
available.  The {\et curplot} variable can be set to any of these, or
to the word ``new'', in which case a new, empty plot is created.

\index{plotstyle variable}
\item{\et plotstyle}\\
This variable is used to determine the plot style in the commands
{\cb plot}, {\cb hardcopy}, and {\cb asciiplot}.  Its value may be one of:

\begin{tabular}{|l|l|}\hline
\vt linplot   & Connect points with line segments\\ \hline
\vt combplot  & Connect each point to the X-axis\\ \hline
\vt pointplot & Plot each point as a discrete glyph\\ \hline
\end{tabular}

\index{pointchars variable}
\item{\et pointchars}\\
If this variable is set as a boolean, alpha characters will be used as
glyphs for point plots (i.e., the {\et pointplot} mode is active) in a
{\cb plot} command.  If set to a string, the characters in this string
are used to plot successive data values.  The default is ``{\vt
oxabcdefhgijklmnpqrstuvwyz}''.

\index{plotstyle keyword!pointplot}
\index{pointplot variable}
\item{\et pointplot}\\
This is a keyword of the {\et plotstyle} variable, or can be set as a
boolean.  This will cause data to be plotted as unconnected points. 
Each successive expression is plotted with a different glyph to mark
the points.  The glyphs default to an internally generated set,
however alpha characters can be used if the variable {\et pointchars}
is set.

\index{gridstyle keyword!polar}
\index{polar variable}
\item{\et polar}\\
This is a keyword of the {\et gridstyle} variable, or can be set as a
boolean.  It specifies use of a polar grid instead of a rectangular
grid.

\index{polydegree variable}
\item{\et polydegree}\\
This variable determines the degree of the polynomial that is fit to
points when a plot is done.  If it is not set or set to 1, then the
points are connected by lines.  If it is greater than 1, then a
polynomial curve is fit to the points.  If the value of {\et
polydegree} is {\it n\/}, then for each {\it n} + 1 adjacent points,
an {\it n\/}th degree curve is fit.  If this is not possible (due to
the fact that the points aren't monotonic), the curve is rotated 90
degrees and another attempt is made.  If is is still unsuccessful,
{\it n} is decreased by 1 and the process is repeated.  Thus four
points in the shape of a diamond may be fit with quadratics to
approximate a circle (although it's not clear that this situation
comes up often in circuit simulation).  The variable {\et gridsize}
determines the size of the grid on which the curve is fit if the data
are monotonic.  If the {\et gridsize} variable is zero or not set, or
the scale is non-monotonic, no polynomial fitting is done.

\index{polysteps variable}
\item{\et polysteps}\\
This variable sets the number of intermediate points to plot between
each actual point used for interpolation.  If not set, 10 points are
used. 

\index{scaletype variable}
\item{\et scaletype}\\
This variable is used to determine the treatment of the Y-axis scaling
used in displaying the curves in the {\cb plot} command.  Its value
may be one of:

\begin{tabular}{|l|l|}\hline
\vt multi  & Use separate Y-scales for each trace (the default)\\ \hline
\vt single & Use common Y-scale for all traces\\ \hline
\vt group  & Use same scale for voltages, currents, and others\\ \hline
\end{tabular}

\index{scaletype keyword!single}
\index{single variable}
\item{\et single}\\
This is a keyword of the {\et scaletype} variable, or can be set as a
boolean.  It indicates the use of a common Y-scale for all traces in
the plot.

\index{gridstyle keyword!smith}
\index{smith variable}
\item{\et smith}\\
This is a keyword of the {\et gridstyle} variable, or can be set as a
boolean.  It specifies use of a Smith grid instead of a rectangular or
polar grid, and an implicit transformation of the data into the
``reflection coefficient'' space through the relation
$S = (z - 1)/(z + 1)$, where {\it z} is the complex input data.

\index{gridstyle keyword!smithgrid}
\index{smithgrid variable}
\item{\et smithgrid}\\
This is a keyword of the {\et gridstyle} variable, or can be set as a
boolean.  It specifies use of a Smith grid instead of a rectangular or
polar grid, and plots the data directly, without transformation.  The
data must fall within the unit circle in the complex plane to be
visible.

\index{ticmarks variable}
\item{\et ticmarks}\\
If this variable is set as a boolean, than an ``x'' will be printed
every 10 points for each curve plotted.  This variable may also be set
as a number, which will be the number of points between each tic mark. 
If interpolation is used for plotting, the ticmarks feature is
disabled.

\index{title variable}
\item{\et title}\\
This variable provides a string to use as the title printed in the
plot.  If not specified, the title is taken as the name of the current
plot.

\index{xcompress variable}
\item{\et xcompress}\\
This variable can be set to an integer {\it value}.  It specifies that
we plot only one out of every {\it value} points in each of the
vectors.

\index{xdelta variable}
\item{\et xdelta}\\
This value is used as the spacing between grid lines on the x-axis, if
set.

\index{xglinewidth variable}
\item{\et xglinewidth}\\
This variable specifies the line width in pixels to use in {\cb
xgraph} plots.  If not set, a minimum line width is used.

\index{xgmarkers variable}
\item{\et xgmarkers}\\
If set, {\cb xgraph} point plots will use cross marks, otherwise big
pixels are used.

\index{xindices variable}
\item{\et xindices}\\
This variable can be set as a list {\vt (} {\it lower upper} {\vt )}
or as a string {\vt "}{\it lower upper}{\vt "}, where {\it lower} and
{\it upper} are integers.  Only data points with indices between {\it
lower} and {\it upper} are plotted.  The value of {\it upper} must be
greater or equal to {\it lower}.

\index{xlabel variable}
\item{\et xlabel}\\
This variable provides a string to be used as the label for the
x-axis.  If not set, the name of the scale vector is used.

\index{xlimit variable}
\item{\et xlimit}\\
This variable can be set as a list {\vt (} {\it lower upper} {\vt )}
or as a string {\vt "}{\it lower upper}{\vt "}, where {\it lower} and
{\it upper} are reals.  The plot area in the x-direction is restricted
to lie between {\vt lower} and {\it upper}.  The area actually used
may be somewhat larger to provide nicely spaced grid lines, however.

\index{gridstyle keyword!xlog}
\index{xlog variable}
\item{\et xlog}\\
This is a keyword of the {\et gridstyle} variable, or can be set as a
boolean.  It specifies use of a log scale for the x-axis and a linear
scale for the y-axis.

\index{ydelta variable}
\item{\et ydelta}\\
This value is used as the spacing between grid lines on the y-axis, if
set.

\index{ylabel variable}
\item{\et ylabel}\\
This variable provides a string to be used as the label for the
y-axis.  If not set, no label is printed.

\index{ylimit variable}
\item{\et ylimit}\\
This variable can be set as a list {\vt (} {\it lower upper} {\vt )}
or as a string {\vt "}{\it lower upper}{\vt "}, where {\it lower} and
{\it upper} are reals.  Setting this variable will limit the plot area
in the y-direction to lie between {\it lower} and {\it upper}.  It may
be expanded slightly to allow for nicely spaced grid lines.

\index{gridstyle keyword!ylog}
\index{ylog variable}
\item{\et ylog}\\
This is a keyword of the {\et gridstyle} variable, or can be set as a
boolean.  It specifies use of a log scale for the y-axis and a linear
scale for the x-axis.

\index{ysep variable}
\item{\et ysep}\\
If this boolean is set, the traces will be provided with their own
portion of the vertical axis, so as to not overlap.  Otherwise, each
trace may occupy the entire vertical range on the plot.
\end{description}

%SU-------------------------------------
\subsection{Simulation Option Variables}
\label{simvars}

% spVars_sim.hlp:sim_vars 082015

These variables control parameters and modes related to simulation. 
Most of these variables can be set indirectly from the {\cb Simulation
Options} tool from the {\cb Sim Opts} button in the {\cb Tools} menu
of the {\cb Tool Control} window, which is equivalent to using the
{\cb set} command to set the variable in the {\WRspice} shell.

Most of these variables are referred to as ``options'' in historic
SPICE vernacular as they are commonly given in a {\vt .options} line
in SPICE input.  In versions of SPICE that are batch-mode only, this
is the only way to set these parameters.  In {\WRspice}, there is
little difference between shell variables and options, however there
are subtleties, particularly with respect to resolving conflicts if
one of these parameters is set both as a shell variable and in a {\vt
.options} line in the current circuit.  These issues are discussed in
the section desctibing the options, \ref{options}. 
 
%-------------
\subsubsection{Real-Valued Parameters}

\begin{description}
% 082015
\index{abstol variable}
\item{\et abstol}\\
This variable sets the absolute error tolerance used in convergence
testing branch currents.

\begin{tabular}{|l|l|l|l|}\hline
\bf Default & \bf Min Value & \bf Max Value & \bf Set From\\ \hline
1e-12 & 1e-15 & 1e-9 & \bf Simulation Options/Tolerance\\ \hline
\end{tabular}
 
% 082015
\index{chgtol variable}
\item{\et chgtol}\\
This variable sets the minimum charge used when predicting the time
step in transient analysis.

\begin{tabular}{|l|l|l|l|}\hline
\bf Default & \bf Min Value & \bf Max Value & \bf Set From\\ \hline
1e-14 & 1e-16 & 1e-12 & \bf Simulation Options/Timestep\\ \hline
\end{tabular}

% 082015
\index{dcmu variable}
\item{\et dcmu}\\
This option variable takes a value of 0.0--0.5, with the default being
0.5.  It applies during operating point analysis.  When set to a value
less than 0.5, the Newton iteration algorithm mixes in some of the
previous solution, which can improve convergence.  The smaller the
value, the larger the mixing.  This gives the user another parameter
to twiddle when trying to achieve dc convergence.

\begin{tabular}{|l|l|l|l|}\hline
\bf Default & \bf Min Value & \bf Max Value & \bf Set From\\ \hline
0.5 & 0.0 & 0.5 & \bf Simulation Options/Convergence\\ \hline
\end{tabular}

% 082015
\index{defad variable}
\item{\et defad}\\
This variable sets the default value for MOS drain diffusion area, and
applies to all MOS device models.

\begin{tabular}{|l|l|l|l|}\hline
\bf Default & \bf Min Value & \bf Max Value & \bf Set From\\ \hline
0.0 & 0.0 & 1e-3 & \bf Simulation Options/Devices\\ \hline
\end{tabular}
 
% 082015
\index{defas variable}
\item{\et defas}\\
This sets the default value for MOS source diffusion area, and applies
to all MOS device models.

\begin{tabular}{|l|l|l|l|}\hline
\bf Default & \bf Min Value & \bf Max Value & \bf Set From\\ \hline
0.0 & 0.0 & 1e-3 & \bf Simulation Options/Devices\\ \hline
\end{tabular}
 
% 082015
\index{defl variable}
\item{\et defl}\\
This sets the default value for MOS channel length, and applies to all
MOS device models.  The default is model dependent, and is 100.0
microns for MOS levels 1--3 and 6, and typically 5.0 microns for other
models.

\begin{tabular}{|l|l|l|l|}\hline
\bf Default & \bf Min Value & \bf Max Value & \bf Set From\\ \hline
 & 0.0 & 1e4 & \bf Simulation Options/Devices\\ \hline
\end{tabular}
 
% 082015
\index{defw variable}
\item{\et defw}\\
This variable sets the default value for MOS channel width, and
applies to all MOS device models.  The default is model dependent, and
is 100.0 microns for MOS levels 1--3 and 6, and typically 5.0 microns
for other models.

\begin{tabular}{|l|l|l|l|}\hline
\bf Default & \bf Min Value & \bf Max Value & \bf Set From\\ \hline
 & 0.0 & 1e4 & \bf Simulation Options/Devices\\ \hline
\end{tabular}
 
% 092716
\index{delmin variable}
\item{\et delmin}\\
This can be used to specify the minimum internal time step alowed
during transient analysis.  When a convergence fails, the internal
time step is reduced, and a solution is attempted again.  If repeated
failures drop the internal timestep below {\vt delmin}, the run will
abort with a ``timestep too small'' message.

If this variable is not set or set to 0.0, {\WRspice} will use {\vt
1e-6}*{\it tmax}.  The {\it tmax} is the maximum internal timestep
which can be specified in the transient analysis specification ({\vt
.tran} syntax), or defaults to {\it tstep}, the transient user
timestep.

\begin{tabular}{|l|l|l|l|}\hline
\bf Default & \bf Min Value & \bf Max Value & \bf Set From\\ \hline
0.0 & 0.0 & 1.0 & \bf Simulation Options/Timestep\\ \hline
\end{tabular}

It may be counterintuitive, but using a larger {\vt delmin} may avoid
nonconvergence.  The matrix elements for reactive terms have the time
delta in the denominator, thus these become large for small delta. 
when delta becomes too small, the matrix elements may become so large
that solutions lose accuracy and won't converge.  On non-convergence,
the time delta is cut, making matters worse and leading to a "timestep
too small" error and termination of analysis.
 
% 082015
\index{dphimax variable}
\item{\et dphimax}\\
This variable sets the maximum allowable phase change of sinusoidal
and exponential sources between internal time points in transient
analysis.

Consider a circuit consisting of a sinusoidal voltage source driving a
resistor network.  The internal transient time steps are normally
determined from a truncation error estimation from the numerical
integration of reactive elements.  Since there are no such elements in
this case, a large, fixed time step is used.  This may not be
sufficient to reasonably define the sinusoidal source waveform, so the
timestep is cut.  This variable sets the time scale for the cut.  The
default value of $\pi/5$ provides about 10 points per cycle.  All of
the built-in source functions that are exponential or sinusoidal
reference this variable in the timestep cutting algorithm.

This variable also limits the transient time step when Josephson
junction devices are present, i.e., it is equivalent to the {\et
jjdphimax} variable in Jspice3.

\begin{tabular}{|l|l|l|l|}\hline
\bf Default & \bf Min Value & \bf Max Value & \bf Set From\\ \hline
$\pi/5$ & $\pi/1000$ & $\pi$ & \bf Simulation Options/Timestep\\ \hline
\end{tabular}

% 082015
\index{gmax variable}
\item{\et gmax}\\
The diagonal elements of the circuit matrix are limited to be no
larger than a value, which can be set with the {\et gmax} option.  No
normal circuit elements will have conductance near this value, however
during iterative solving, large values may be produced by some device
models.  This can cause non-convergence or the matrix may become
singular.  By limiting the matrix elements, the problem is avoided.

\begin{tabular}{|l|l|l|l|}\hline
\bf Default & \bf Min Value & \bf Max Value & \bf Set From\\ \hline
1e6 & 1e-2 & 1e12 & \bf Simulation Options/Convergence\\ \hline
\end{tabular}

% 082015
\index{gmin variable}
\item{\et gmin}\\
This sets the value of {\vt gmin}, the minimum conductance allowed by the
program.

\begin{tabular}{|l|l|l|l|}\hline
\bf Default & \bf Min Value & \bf Max Value & \bf Set From\\ \hline
1e-12 & 1e-15 & 1e-6 & \bf Simulation Options/Tolerance\\ \hline
\end{tabular}

% 032817
\index{maxdata variable}
\item{\et maxdata}\\
This variable sets the maximum allowable memory stored as plot data
during an analysis, in kilobytes.  The default is 256000.  For all
analyses except transient with the {\et steptype} variable set to
``{\vt nousertp}'', the run will abort at the beginning if the memory
would exceed the limit.  Otherwise, the run will end when the limit is
reached.

\begin{tabular}{|l|l|l|l|}\hline
\bf Default & \bf Min Value & \bf Max Value & \bf Set From\\ \hline
256000 & 1e3 & 2e9 & \bf Simulation Options/General\\ \hline
\end{tabular}

% 082015
\index{minbreak variable}
\item{\et minbreak}\\
This sets the minimum interval between breakpoints in transient
analysis.  If this variable is not set or set to 0.0, {\WRspice} will
use a value of 5e-8*{\it maxStep}, where {\it maxStep} may be
specified in the transient analysis initiation ({\vt .tran} syntax),
or defaults to ({\it endTime} - {\it startTime\/})/50.

\begin{tabular}{|l|l|l|l|}\hline
\bf Default & \bf Min Value & \bf Max Value & \bf Set From\\ \hline
0.0 & 0.0 & 1.0 & \bf Simulation Options/Timestep\\ \hline
\end{tabular}

% 082015
\index{pivrel variable}
\item{\et pivrel}\\
This variable sets the relative ratio between the largest column entry
and an acceptable pivot value.  In the numerical pivoting algorithm
the allowed minimum pivot value is determined by
\begin{quote}
{\it epsrel} = MAX({\it pivrel\/}*{\it maxval\/}, {\it pivtol\/})
\end{quote}
where {\it maxval} is the maximum element in the column where a pivot
is sought (partial pivoting).

\begin{tabular}{|l|l|l|l|}\hline
\bf Default & \bf Min Value & \bf Max Value & \bf Set From\\ \hline
1e-3 & 1e-5 & 1.0 & \bf Simulation Options/Tolerance\\ \hline
\end{tabular}
 
% 082015
\index{pivtol variable}
\item{\et pivtol}\\
This variable sets the absolute minimum value for a matrix entry to be
accepted as a pivot.

\begin{tabular}{|l|l|l|l|}\hline
\bf Default & \bf Min Value & \bf Max Value & \bf Set From\\ \hline
1e-13 & 1e-18 & 1e-9 & \bf Simulation Options/Tolerance\\ \hline
\end{tabular}
 
% 072716
\index{rampup variable}
\item{\et rampup}\\
When set to a value {\it dt\/}, during transient analysis all source
values are effectively multiplied by {\vt pwl(0 0} {\it dt} {\vt 1)}. 
That is, all sources ramp up from zero, and assume their normal values
at time = {\it dt\/}.

The dc operating point calculation (if {\vt uic} is not given) 
becomes trivial with all sources set to zero.

This is mostly intended for Josephson junction circuits so constant
valued sources can be used without convergence problems.
 
\begin{tabular}{|l|l|l|l|}\hline
\bf Default & \bf Min Value & \bf Max Value & \bf Set From\\ \hline
0.0 & 0.0 & 1.0 & \bf Simulation Options/Convergence\\ \hline
\end{tabular}

% 082015
\index{reltol variable}
\item{\et reltol}\\
This sets the relative error tolerance used in convergence testing. 

\begin{tabular}{|l|l|l|l|}\hline
\bf Default & \bf Min Value & \bf Max Value & \bf Set From\\ \hline
1e-3 & 1e-8 & 1e-2 & \bf Simulation Options/Tolerance\\ \hline
\end{tabular}

% 082015
\index{temp variable}
\item{\et temp}\\
This variable specifies the assumed operating temperature of the
circuit under simulation.

\begin{tabular}{|l|l|l|l|}\hline
\bf Default & \bf Min Value & \bf Max Value & \bf Set From\\ \hline
25 & -273.15 & 1e3 & \bf Simulation Options/Temperature\\ \hline
\end{tabular}
 
% 082015
\index{tnom variable}
\item{\et tnom}\\
The {\et tnom} variable sets the nominal temperature.  This is the
temperature at which device model parameters are assumed to have been
measured.

\begin{tabular}{|l|l|l|l|}\hline
\bf Default & \bf Min Value & \bf Max Value & \bf Set From\\ \hline
25 & -273.15 & 1e3 & \bf Simulation Options/Temperature\\ \hline
\end{tabular}

% 082015
\index{trapratio variable}
\item{\et trapratio}\\
This controls the ``sensitivity'' of the trapezoid integration
convergence test, as described with the {\et trapcheck} variable. 
Higher values make the test less sensitive (and effective) but reduce
the number of false positives that can slow down simulation.

\begin{tabular}{|l|l|l|l|}\hline
\bf Default & \bf Min Value & \bf Max Value & \bf Set From\\ \hline
10.0 & 2.0 & 100.0 & \bf Simulation Options/Timestep\\ \hline
\end{tabular}

% 082015
\index{trtol variable}
\item{\et trtol}\\
This is a factor used during time step prediction in transient
analysis.  This parameter is an estimate of the factor by which
{\WRspice} overestimates the actual truncation error.  Larger values
will cause {\WRspice} to attempt larger time steps.

\begin{tabular}{|l|l|l|l|}\hline
\bf Default & \bf Min Value & \bf Max Value & \bf Set From\\ \hline
7.0 & 1.0 & 20.0 & \bf Simulation Options/Timestep\\ \hline
\end{tabular}

% 082015
\index{vntol variable}
\item{\et vntol}\\
This variable sets the absolute voltage error tolerance used in
convergence testing.

\begin{tabular}{|l|l|l|l|}\hline
\bf Default & \bf Min Value & \bf Max Value & \bf Set From\\ \hline
1e-6 & 1e-9 & 1e-3 & \bf Simulation Options/Tolerance\\ \hline
\end{tabular}
     
% 082015
\index{xmu variable}
\item{\et xmu}\\
This is the trapezoid/Euler mixing parameter that was provided in
SPICE2, but not in SPICE3.  It effectively provides a mixture of
trapezoidal and backward Euler integration, which can be useful if
trapezoid integration produces nonconvergence.  It applies only when
trapezoidal integration is in use, and the maximum order is larger
than 1.  When {\et xmu} is 0.5 (the default), pure trapezoid
integration is used.  If 0.0, pure backward-Euler (rectangular)
integration is used, but the time step predictor still uses the
trapezoid formula, so this will not be the same as setting {\et
maxord} to 1 (which also enforces backward-Euler integration). 
Trapezoidal integration convergence problems can sometimes be solved
by setting {\et xmu} to values below 0.5.  Setting {\et xmu} below
about 0.4 is not recommended, better to use Gear integration.

\begin{tabular}{|l|l|l|l|}\hline
\bf Default & \bf Min Value & \bf Max Value & \bf Set From\\ \hline
0.5 & 0.0 & 0.5 & \bf Simulation Options/Timestep\\ \hline
\end{tabular}
\end{description}

%-------------
\subsubsection{Integer-Valued Parameters}

\begin{description}
% 082015
\index{bypass variable}
\item{\et bypass}\\
When bypassing is enabled, which is the default, semiconductor devices
will skip certain computations when terminal voltages are relatively
static.  This is a speed optimization.  This variable can be set as an
integer to a value of 0 (zero) to disable bypassing.  This can perhaps
increase accuracy, at the expense of speed.  When set to a nonzero
value, or to no value, there is no effect as bypassing is enabled by
default.

\begin{tabular}{|l|l|l|l|}\hline
\bf Default & \bf Min Value & \bf Max Value & \bf Set From\\ \hline
1 & 0 & 1 & \bf Simulation Options/Devices\\ \hline
\end{tabular}

% 082015
\index{fpemode variable}
\item{\et fpemode}\\
The {\et fpemode} variable can be set to an integer which controls how
the program responds to a floating-point exception, such as divide by
zero or overflow.  The accepted values are

\begin{description}
\item{0 (default)}\\
Halt computation if an error is detected.  In many cases, the
computation will be retried, after going to a smaller step size in
simulation (for example), so the halt does not necessarily mean
simulatiuon failure.

\item{1}\\
Ignore floating-point errors and just continue.  This is what most
other simulators do.

\item{2}\\
This is for debugging.  A floating-point error will cause a signal
to be emitted, that when caught will terminate the program.  Under
control of a debugger, the expression causing the exception can be
located easily, but this is not likely to be useful for the
general user.
\end{description}

In releases prior to 4.1.6, there were two ``signaling'' modes, that
attempted to return to the running program.  This is no longer
possible and these would instead hang the program if used.

If set as an option, e.g. ``{\vt .options fpemode=1}'' then the mode
applies only when the circuit is running a simulation.

\begin{tabular}{|l|l|l|l|}\hline
\bf Default & \bf Min Value & \bf Max Value & \bf Set From\\ \hline
0 & 0 & 2 & \bf Simulation Options/General\\ \hline
\end{tabular}

% 082015
\index{gminsteps variable}
\item{\et gminsteps}\\
This variable controls the gmin stepping used in operating point
analysis (see \ref{opline}).  The values are integers in the range -1
through 20, with the default being 0.  If -1, no gmin stepping will be
attempted.  If set to 0 (the default) the dynamic gmin stepping
algorithm is used.  This will use variable-sized steps, reattempting
with a smaller step after failure.  If positive, the Berkeley SPICE3
gmin stepping algorithm will be used, with a fixed number of steps as
given.

\begin{tabular}{|l|l|l|l|}\hline
\bf Default & \bf Min Value & \bf Max Value & \bf Set From\\ \hline
0 & -1 & 20 & \bf Simulation Options/Convergence\\ \hline
\end{tabular}

% 082015
\index{interplev variable}
\item{\et interplev}\\
In transient analysis, in the default {\et steptype} mode, internal
timepoint data are interpolated onto the external (user supplied) time
points.  Only the interpolated data are saved.  This variable sets the
polynomial degree of interpolation, in the range 1--3.  The default is
1 (linear interpolation).

\begin{tabular}{|l|l|l|l|}\hline
\bf Default & \bf Min Value & \bf Max Value & \bf Set From\\ \hline
1 & 1 & 3 & \bf Simulation Options/Timestep\\ \hline
\end{tabular}
 
% 082015
\index{itl1 variable}
\item{\et itl1}\\
The {\et itl1} variable sets the dc iteration limit before convergence
failure is indicated.

\begin{tabular}{|l|l|l|l|}\hline
\bf Default & \bf Min Value & \bf Max Value & \bf Set From\\ \hline
400 & 10 & 1000 & \bf Simulation Options/Convergence\\ \hline
\end{tabular}
 
% 082015
\index{itl2 variable}
\item{\et itl2}\\
The {\et itl2} variable sets the dc transfer curve iteration limit
before convergence failure is indicated.

\begin{tabular}{|l|l|l|l|}\hline
\bf Default & \bf Min Value & \bf Max Value & \bf Set From\\ \hline
100 & 4 & 500 & \bf Simulation Options/Convergence\\ \hline
\end{tabular}

% 082015
\index{itl2gmin variable}
\item{\et itl2gmin}\\
The {\et itl2gmin} variable sets the maximum number of iterations to
allow per step during gmin stepping when finding the dc operating
point.

\begin{tabular}{|l|l|l|l|}\hline
\bf Default & \bf Min Value & \bf Max Value & \bf Set From\\ \hline
20 & 4 & 500 & \bf Simulation Options/Convergence\\ \hline
\end{tabular}

% 082015
\index{itl2src variable}
\item{\et itl2src}\\
The {\et itl2src} variable sets the maximum number of iterations to
allow per step during dynamic source stepping when finding the dc
operating point.

\begin{tabular}{|l|l|l|l|}\hline
\bf Default & \bf Min Value & \bf Max Value & \bf Set From\\ \hline
20 & 4 & 500 & \bf Simulation Options/Convergence\\ \hline
\end{tabular}

% 013016
\index{itl4 variable}
\item{\et itl4}\\
This variable sets the number of timepoint iterations in transient
analysis above which convergence failure is indicated.

\begin{tabular}{|l|l|l|l|}\hline
\bf Default & \bf Min Value & \bf Max Value & \bf Set From\\ \hline
20 & 4 & 100 & \bf Simulation Options/Convergence\\ \hline
\end{tabular}

% 082315
\index{loadthrds variable}
\item{\et loadthrds}\\
{\WRspice} currently supports multi-threaded matrix loading on all
supported platforms.  The concept is to use otherwise unused processor
cores to evaluate device model code in parallel, thus reducing
simulation time.  This is experimental, and applies to dc (including
operating point) and transient analysis only.

The load function is the function that evaluates all of the device
model code, and sets up the circuit matrix and right-hand side vector,
for subsequent LU factorization and solution.  This dominates circuit
simulation time in some circuits, particularly when using complex
device models such as BSIM.

This variable sets the number of helper threads that will be created
to assist the main thread in evaluating device code.  If 0 or not set,
no helper threads are used.  It has a corresponding entry in the
{\cb General} page of the {\cb Simulation Options} panel.

Multiple threads will not necessarily make simulations run faster and
in fact can have the opposite effect.  The latter is sadly true in
Josephson circuits tested thus far.  The problem is that
multi-threading adds a small amount of overhead, and the load function
may be called hundreds of thousands of times in these simulations. 
The model calculation for JJs runs very quickly, and the overhead
becomes significant.  The same is true for other simple devices.  Work
to improve this situation is ongoing.

On the other hand, if there is a lot of computation in the device
model, this will dominate the overhead and we see shorter load times. 
This is true for BSIM MOS models, in circuits with more than about 20
transistors.  Such simulations can run 2-3 times faster than a single
thread.  One should experiment with the value of the {\et loadthrds}
variable.  Most likely for best performance, the value plus the main
thread should equal the number of available hardware threads, which is
usually twice the number of available CPU cores.

\begin{tabular}{|l|l|l|l|}\hline
\bf Default & \bf Min Value & \bf Max Value & \bf Set From\\ \hline
0 & 0 & 31 & \bf Simulation Options/Beneral\\ \hline
\end{tabular}

% 120215
\index{loopthrds variable}
\item{\et loopthrds}\\
{\WRspice} currently supports multi-threaded simulation runs when
performing chained-dc analysis (see \ref{threads}).  Most analysis
types allow dc analysis chaining.  That is, the basic analysis
specification is followed by a dc analysis specification involving one
or two sources or device parameters in the circuit, and the analysis
is run at each dc bias condition.  The result will be a family of
multi-dimensional vectors, one dimension per bias condition.

In this release, the dc-point analyses may be run using multiple
threads.  All supported operating systems provide multi-threading,
however parallel runs require multiple cores or CPUs.  Multiple
threads will be used automatically if:

\begin{enumerate}
\item{The {\et loopthrds} variable is set to an integer 1 or larger. 
This option variable indicates the number of ``helper'' threads to
use.  It can be set to an integer in the range 0 through 31, with 0
being the same as not set (single threading).  The ``best'' value can
be found experimentally, but the value plus the main thread probably
equals twice the number of available CPU cores.}

\item{The analysis specification supports multi-threading.  Presently
the following analyses can be multi-threaded:
\begin{quote}
{\bf tran}, without scrolling, segmenting, and with the ``nousertp''
    mode not set.\\
{\bf ac}\\
{\bf tf}
\end{quote}}
\end{enumerate}

Concurrent threads in loop/Monte Carlo analysis is not yet available,
but will be be provided in a future release.  These analysis require a
rebuild of the circuit object for each trial.

\begin{quote}
Hint:  If your requirements can be met with chained dc analysis
instead of loop analysis, overhead can be minimized.  Chained dc can
be used in many instances, since a source voltage can be used in an
expression for a component value, for example.
\end{quote}

In chained dc analysis, the same circuit object is re-used multiple
times.  In loop analysis, the circuit object must be recreated for
each trial run, since the deck after shell substitution will have
changed.

The {\et loopthrds} and {\et loadthrds} can be used together.  One
should experiment to find the fastest settings.

\begin{tabular}{|l|l|l|l|}\hline
\bf Default & \bf Min Value & \bf Max Value & \bf Set From\\ \hline
0 & 0 & 31 & \bf Simulation Options/Beneral\\ \hline
\end{tabular}

% 082015
\index{maxord variable}
\item{\et maxord}\\
This variable sets the maximum order of the integration method
used.  Setting this to 1 will always use rectangular integration.
If unset, the value taken is 2, which is the maximum order for the default
trapezoidal integration.  If Gear integration is used, the maximum
order is 6.

\begin{tabular}{|l|l|l|l|}\hline
\bf Default & \bf Min Value & \bf Max Value & \bf Set From\\ \hline
2 & 1 & 6 & \bf Simulation Options/Timestep\\ \hline
\end{tabular}

% 082015
\index{srcsteps variable}
\item{\et srcsteps}\\
This variable controls the source stepping used in operating point
analysis (see \ref{opline}).  The values are integers in the range -1
through 20, with the default being 0.  If -1, no source stepping will
be attempted.  If set to 0 (the default) the dynamic source stepping
algorithm is used.  This will use variable-sized steps, reattempting
with a smaller step after failure.  If positive, the Berkeley SPICE3
source stepping algorithm will be used, with a fixed number of steps
as given.

\begin{tabular}{|l|l|l|l|}\hline
\bf Default & \bf Min Value & \bf Max Value & \bf Set From\\ \hline
0 & -1 & 20 & \bf Simulation Options/Convergence\\ \hline
\end{tabular}

% 032420
\index{vastep variable}
\item{\et vastep}\\
This option applies when a {\vt .verilog} block is present, and the
Verilog simulation is run in parallel with transient analysis. 
Precisely how this occurs is controlled by this option.  The value is
an unsigned integer.

\begin{description}
\item{0}\\
The Verilog simulation is advanced by calling the {\cb vastep}
command, likely through a callback function called from a {\vt .stop}
line.

\item{1} (the default)\\
The Verilog simulation is advanced at each transient analysis
time step.

\item{\it X} (positive integer greater than 1)\\
The Verilog simulation is advanced after {\it X} transient time
steps.
\end{description}

\end{description}

%-------------
\subsubsection{Boolean Parameters}

\begin{description}
% 082015
\index{dcoddstep variable}
\item{\et dcoddstep}\\
Where set: {\cb Simulation Options/General}

Consider the dc sweep specification   
\begin{quote}
\vt .dc vxxx 0 1.1 0.2
\end{quote}
{\WRspice} will evaluate at 0.0, 0.2, ...  1.0.  If {\et dcoddstep} is
given, evaluation will also be performed at the end-of-range value
1.1.  This is the default for some other simulators, so {\et
dcoddstep} provides compatibility.

% 082015
\index{extprec variable}
\item{\et extprec}\\
Where set: {\cb Simulation Options/General}

When this option is set, {\WRspice} will use extended precision
arithmetic when setting up and solving the circuit equations.  With
Intel, this mode uses the 80-bit native floating point format for all
calculations, rather than the 64-bit ``double precision''.  This
requires that floating point numbers use 16 bytes rather than 8,
however matrix space is allocated assuming complex numbers, which are
16 bytes.  Thus, this mode has no memory-use penalty, and may actually
cause some circuits to simulate faster.

The mode applies to both KLU and Sparse matrix solvers.  It adds about
three decimal digits of precision to the calculations.  Using extended
precision may avoid ``singular matrix'' and other convergence problems
with some circuits.  See and run the ``{\vt precision.cir}'' file in
the examples for more information.

% 082015
\index{forcegmin variable}
\item{\et forcegmin}\\
Where set: {\cb Simulation Options/Convergence}

When set, this will enforce a minimum {\et gmin} conductance to ground
on all nodes in the circuit (including internal nodes of devices). 
This may facilitate convergence.

% 082015
\index{gminfirst variable}
\item{\et gminfirst}\\
Where set: {\cb Simulation Options/Convergence}

When this boolean option variable is set, during operating point
analysis, gmin stepping is attempted before source stepping.  This is
the default in Berkeley SPICE, however the {\WRspice} default is to
apply source stepping first, which seems more effective.

% 082015
\index{hspice variable}
\item{\et hspice}\\
Where set: {\cb Simulation Options/Parser}

When set, many of the HSPICE parameters and keywords that are not
handled are silently ignored.  Ordinarily, these produce a warning
message.  In particular, when set:

\begin{enumerate}
\item{The following MOS model parameters are silently ignored.}

\begin{tabular}{p{0.7in}p{0.7in}p{0.7in}p{0.7in}p{0.7in}p{0.7in}}
\vt
acm\newline
alpha\newline
binflag\newline
calcacm\newline
capop\newline
cjgate\newline
cta
&
\vt
ctp\newline
dtemp\newline
hdif\newline
iirat\newline
lalpha\newline
ldif\newline
lmlt
&
\vt
lref\newline
lvcr\newline
mismatchflag\newline
nds\newline
pta\newline
ptp\newline
rd
&
\vt
rdc\newline
rs\newline
rsc\newline
scale\newline
scalm\newline
sfvtflag\newline
sigma
&
\vt
tlev\newline
tlevc\newline
vcr\newline
vnds\newline
walpha\newline
wmlt\newline
wref
&
\vt
wvcr\newline
xl\newline
xw\\
\end{tabular}

\item{The following BJT model parameters are silently ignored.}

\begin{tabular}{p{0.7in}p{0.7in}p{0.7in}p{0.7in}p{0.7in}}
\vt iss & \vt ns & \vt tlev & \vt tlevc & \vt update\\
\end{tabular}

\item{The following MOS device parameters are silently ignored.}

\begin{tabular}{p{0.7in}}
\vt
dtemp\\
\end{tabular}

\item{The following control lines are silently ignored.}

\begin{tabular}{p{0.7in}p{0.7in}p{0.7in}p{0.7in}}
\vt
.alias\newline
.alter\newline
.connect\newline
.data
&
\vt
.dellib\newline
.dout\newline
.global\newline
.graph
&
\vt
.hdl\newline
.lin\newline
.malias \newline
.protect
&
\vt
.stim\newline
.unprotect\\
\end{tabular}
\end{enumerate}

% 082015
\index{jjaccel variable}
\item{\et jjaccel}\\
Where set: {\cb Simulation Options/Timestep}

This applies only when Josephson junctions are present in the circuit,
and performing transient analysis.  It causes a faster convergence
testing and iteration control algorithm to be used, rather than the
standard more comprehensive algorithm suitable for all devices.  If
the circuit consists of Josephson junctions, passive elements, and
sources only, then setting this option may provide a reduction in
simulation time.  It probably should not be used if semiconductor
devices are present.

% 082015
\index{noiter variable}
\item{\et noiter}\\
{\it Not currently implemented.}

During transient analysis, at each new time step, Newton iterations
are used to solve the nonlinear circuit equations.  The first
iteration, the prediction step, uses extrapolation from past values to
obtain a best guess at the solution for use as input.  Additional
iterations use the previous output values as input.

In cases where the nonlinearity is weak, or where the internal time
step is forced to be small (as when Josephson junctions are present)
iterations beyond the predictor sometimes lead to unneeded accuracy. 
Setting the variable {\et noiter} causes skipping of iterations beyond
the prediction step, and also skipping of certain other code.  This
maximizes the simulation rate, but can lead to errors if not used
carefully.  Much the same effect can be obtained by setting {\et
reltol} to a large value, however {\et noiter} is more efficient as
convergence testing and matrix loading are skipped, as there is
a-priori knowledge that no iterations are to take place.  The
iteration count and total internal timepoint count are available from
the {\cb rusage} command.

% 082015
\index{nojjtp variable}
\item{\et nojjtp}\\
Where set: {\cb Simulation Options/Timestep}

During transient analysis with Josephson junctions present, the
default time step is given by $T = \phi/vmax$, where $\phi =
\Phi_0/2\pi$ ($\phi$ = 3.291086546e-16, $\Phi_0$ is the magnetic
flux quantum) and $vmax = max(Vj, sqrt({\phi}Jc/C))$.  If the
variable {\et nojjtp} is set, the timestep is determined from a
truncation error calculation, as is the case when Josephson
junctions are not present in the circuit.  The user should
experiment to determine which timestep leads to faster execution.

% 082015
\index{noklu variable}
\item{\et noklu}\\
Where set: {\cb Simulation Options/General}

When this boolean variable is set, KLU will not be used for sparse
matrix calculations.  Otherwise, if the KLU plug-in is available, KLU
will be used by default.  The KLU plug-in is provided with all
{\WRspice} distributions, and is installed in the startup directory.

% 082015
\index{nomatsort variable}
\item{\et nomatsort}\\
Where set: {\cb Simulation Options/General}

When using Sparse (i.e., KLU is unavailable or disabled), this
boolean variable when set will prevent using element sorting to
improve speed.  This corresponds to the legacy {\WRspice}
sparse code.  It may be interesting for comparison purposes, but
setting this variable will slow simulation of most circuits.
This variable has no effect if KLU is being used.

% 082015
\index{noopiter variable}
\item{\et noopiter}\\
Where set: {\cb Simulation Options/Convergence}

This boolean variable applies when one of {\et gminsteps} or {\et
srcsteps} is given a positive value, and thus operating point analysis
(see \ref{opline}) is using a Berkeley algorithm.  In this case, by
default a direct iterative solution of the circuit matrix is
attempted, and if this fails the stepping methods are attempted.  This
initial direct solution attempt most often fails with complex circuits
and can be time consuming.  Setting {\et noopiter}> will skip this
initial attempt.

% 082015
\index{noshellopts variable}
\item{\et noshellopts}\\
This option is deprecated, use {\et optmerge} instead.  See the
section describing options (\ref{options}) for a discussion of option
merging and the role of this variable.

If set, do not use {\WRspice} options that have been set interactively
through the shell.  Use only options that appear in a {\vt .options}
line in the circuit file when running a simulation of the circuit.

% 082015
\index{oldlimit variable}
\item{\et oldlimit}\\
Where set: {\cb Simulation Options/Devices}

When set, the SPICE2 limiting algorithm for MOS devices is used. 
Otherwise, an improved limiting procedure is used.

% 082015
\index{oldsteplim variable}
\item{\et oldsteplim}\\
In transient analysis, {\WRspice} by default limits the maximum
internal time step to the printing time step ({\it tstep\/}).  This is
obtained from the {\vt tran} line

\begin{quote}
(simplified syntax)\\
{\vt .tran} {\it tstep} {\it tstop} [{\it tstart} [{\it tmax\/}]]
\end{quote}

I.e., {\it tmax} now defaults to {\it tstep\/}.  Previously if
defaulted to ({\it tstop} -- {\it tstart\/})/50, which is usually a
much larger value.

The {\et oldsteplim} boolean option if given will revert the run to
the earlier limiting condition.

It is important to understand the consequences of this difference. 
This change was made to improve results from circuits containing only
devices that weakly limit the time step (e.g.  MOSFETs, ring
oscillator results) which otherwise can be ugly and wrong.  This
allows users of such devices to get good results without having to set
an explicit maximum time step in the tran line.

However, if the printing time increment {\it tstep} is too small, the
simulation time can dramatically increase, since these points are
actually being calculated and not just interpolated.  The user in this
situation has several options:

\begin{enumerate}
\item{Accept the longer analysis time as the cost of greater accuracy.}
\item{Use a larger printing time increment ({\it tstep\/}).}
\item{ Use the {\it tmax} parameter to set a larger limit.}
\item{Use {\vt .options oldsteplim} to use the old limit of ({\it
tstop} -- {\it tstart\/})/50.}
\end{enumerate}

% 082015
\index{renumber variable}
\item{\et renumber}\\
Where set: {\cb Simulation Options/Parser}

When set, the source lines are renumbered sequentially after
subcircuit expansion.

% 082015
\index{savecurrent variable}
\item{\et savecurrent}\\
Where set: {\cb Simulation Options/General}

If this variable is set, then all device current special vectors are
saved in the plot by default during analysis.  This enables plotting
of device currents using the {\vt @{\it device}[{\it param}]}
construct.

% 082015
\index{spice3 variable}
\item{\et spice3}\\
Where set: {\cb Simulation Options/Timestep}

By default, {\WRspice} uses a custom algorithm for controlling
integration order during transient analysis.  This algorithm provides
the following advantages over the SPICE3 algorithm:

\begin{enumerate}
\item{It provides a possibly better determination of when to use 
higher integration orders.  This is slightly different from the
SPICE3 algorithm even for the order 2 that SPICE3 supports, and  
probably takes a few more Euler time steps, but the
{\WRspice} code appears to be less susceptible to trapezoid 
integration nonconvergence.}

\item{{\WRspice} allows the full range of Gear integration orders,
unlike SPICE3 which does not advance integration order above 2, when
{\et maxord} is larger than 2.  It is not clear how useful
higher-order Gear integration is.  Unlike Gear 2, which is much more
stable in general than trapezoidal integration for stiff systems, this
is not true of the higher orders.}

\item{When the time step is reduced and integration order is cut due
to non-convergence, backward-Euler is now enforced for the next two
time steps.  In SPICE3, only the first time step is forced to be
backward-Euler.  The new approach reduces the tendency of some
circuits to not converge when trapezoidal integration is used.}
\end{enumerate}

The standard SPICE3 logic can be used if desired, by setting the
boolean option variable {\et spice3}.  {\WRspice} releases prior to
3.2.13 used the SPICE3 algorithm exclusively.

% 082015
\index{trapcheck variable}
\item{\et trapcheck}\\
Where set: {\cb Simulation Options/Timestep}

In some circuits, whose equations are ``stiff'' in a mathematical
sense, trapezoidal integration may not converge in transient analysis. 
These circuits likely have a low impedance (voltage source) driving a
capacitor, and/or a high impedance driving an inductor. 
Non-convergence can take several forms:

\begin{enumerate}
\item{The run exits with a ``timestep too small'' message.}
\item{The run exits with a math error such as overflow or underflow.}
\item{Circuit variables oscillate between values at every internal
 time point.  The oscillations may increase in amplitude as simulation
 progresses.}
\item{Circuit variables monotonically diverge to huge values.}
\end{enumerate}

When using trapezoidal integration, there is a test to check for the
oscillatory behavior characteristic of this type of nonconvergence. 
If nonconvergence is detected, the present time point is rejected, the
time step is cut by a factor of eight, and the time point calculation
is repeated using backward Euler integration.  The circuit will return
to trapezoid integration in a few internal time steps.

This is an improvement, but does not solve all convergence problems. 
In particular, this test will not detect monotonic divergence, which
could be detected by other means but too late to do anything about it.

This test is not enabled by default, since it tends to cause circuits
to simulate a little more slowly.  It tends to produce false-positives
which increase the iteration count.  When needed, it can be enabled by
setting the {\et trapcheck} variable.

\index{notrapcheck variable}
In {\WRspice} releases prior to 4.1.22, this test was enabled by
default, and could be disabled by setting a variable named ``{\vt
notrapcheck}''.  The {\et notrapcheck} variable is no longer
recognized.

% 082015
\index{trytocompact variable}
\item{\et trytocompact}\\
Where set: {\cb Simulation Options/Devices}

This boolean variable is applicable only to the LTRA model.  When
specified, the simulator tries to condense LTRA transmission line past
history of input voltages and currents.

% 082015
\index{useadjoint variable}
\item{\et useadjoint}\\
Where set: {\cb Simulation Options/Devices}

Most of the BSIM device models in {\WRspice} have added code that
builds an adjoint matrix which is used to accurately compute device
currents.  The computed currents are not used in the device models,
but are available as simulation outputs.  This has a small performance
overhead so is not enabled by default, but will be enabled by setting
this variable.  Without this it may not be possible to obtain device
currents during the simulation, using the {\vt \@}{\it device\/}{\vt
[}{\it param\/}{\vt ]} ``pseudo-vector''.

\index{noadjoint variable}
In {\WRspice} releases prior to 4.1.23, this feature was enabled by
default, and a variable named ``{\et noadjoint}'' could be set to
disable the feature.  The {\et noadjoint} option is no longer
recognized.
\end{description}

%-------------
\subsubsection{String Parameters}

\begin{description}
% 082015
\index{method variable}
\item{\et method}\\
This string can be set to either of the keywords ``{\vt trap}'', which
is the default and sets trapezoidal integration, or ``{\vt gear}'',
for Gear integration.  The {\et maxord} variable sets the maximum
order of the integration.

\begin{tabular}{|l|l|l|l|}\hline
\bf Default & \bf Values & \bf Set From\\ \hline
\et trap & \et trap, gear & \bf Simulation Options/Timestep\\ \hline
\end{tabular}

% 082015
\index{optmerge variable}
\item{\et optmerge}\\
This variable is used to specify the rule for dealing with options and
variables that are set in the shell and also in the circuit (given in
{\vt .options} lines).  The description of option merging in
\ref{options} explains the use of this variable.

\begin{tabular}{|l|l|l|l|}\hline
\bf Default & \bf Values & \bf Set From\\ \hline
\et global & \et global, local, noshell & \bf Simulation
  Options/Parser\\ \hline
\end{tabular}

% 082015
\index{parhier variable}
\item{\et parhier}\\
By default, parameters from {\vt .param} lines, subcircuit
instantiation lines, and subcircuit definition lines have top-down
precedence, meaning that when resolving parameter name clashes, the
definition at the highest level in the subcircuit hierarchy takes
precedence.  Thus, by default, parameters defined in {\vt .param}
lines outside of any subcircuit will override parameters of the same
name anywhere in the hierarchy.

The {\vt parhier} option variable can be set to one of the keywords
``{\vt global}'' or ``{\vt local}''.  The ``{\vt global}'' setting
retains default behavior.  The ``{\vt local}'' setting reverses the
precedence to bottom-up.  In this case, parameter definitions at the
lowest level within subcircuits will have precedence.

The parameter scoping rules are identical to HSPICE in release 3.2.15
and later.  Earlier releases had different scoping rules, with the
default being closer but not identical to the ``local'' rule.

\begin{tabular}{|l|l|l|l|}\hline
\bf Default & \bf Values & \bf Set From\\ \hline
\et global & \et global, local & \bf Simulation Options/Parser\\ \hline
\end{tabular}

% 083016
\index{steptype variable}
\item{\et steptype}\\
This string can be set to one of four keywords which determine the
data output mode in transient analysis.  It can be set to ``{\vt
interpolate}'', which is the default, ``{\vt hitusertp}'', ``{\vt
nousertp}'', or ``{\vt fixedstep}''.  The integers 0, 1, 2, 3 are
effectively synonyms for these keywords.

If not set, or set to ``{\vt interpolate}'', output points are
interpolated from internal time points to the user time increments,
with degree 1 (the default) to 3, set by the {\et interplev} variable.

If set to ``{\vt hitusertp}'', then during transient analysis the time
step will be cut so as to land on the user time points.  This requires
more simulation time, but provides the greatest accuracy.

Setting to ``{\vt nousertp}'' will cause internal timepoint data to be
saved, either in internal data structures in interactive mode or in
the rawfile in batch mode.  The amount of data can grow quite large.

If set to ``{\vt fixedstep}'', operation is similar to ``{\vt
hitusertp}'', however the internal time step is constrained to this
value exactly.  No smaller time step is taken, if convergence fails
then the run terminates.  The time delta is that given for the
transient analysis.  This mode is only useful for debugging as
truncation error is ignored.  As a side-effect the integration method
will be rectangular.

\begin{tabular}{|l|l|l|l|}\hline
\bf Default & \bf Values & \bf Set From\\ \hline
\et interpolate & \et interpolate, hitusertp, nousertp, fixedstep & \bf
  Simulation Options/Timestep\\ \hline
\end{tabular}

% 011821
\index{tjm\_path variable}
\item{\et tjm\_path}\\
This list variable provides the directories to search for tunnel
current amplitude tables created with the {\it mmjco} utility or
equivalent, for use in the microscopic Josephson junction model.  If
not given, the search path is effectively ``{\vt ( .  \$HOME/.mmjco )}''.

\end{description}

%SU-------------------------------------
\subsection{Syntax Control Variables}

% spVars_debug.hlp:syntax_vars 030619

These variables alter the expected syntax of various types of
{\WRspice} input.  It may, on occasion, be useful or necessary to use
one or more of these variables to provide compatibility with SPICE
input intended for another simulator, or for compatibility with
earlier releases of {\WRspice}.
 
\begin{description}
\index{modelcard variable}
\item{\et modelcard}\\
This variable allows the keyword that specifies a model to be reset.
If unset, the keyword is ``{\vt .model}''.

\index{nobjthack variable}
\item{\et nobjthack}\\
If this boolean is set, bipolar transistors are assumed to have four
nodes.  Otherwise, three nodes are acceptable.  This only affects
subcircuit expansion.

\index{pexnodes variable}
\item{\et pexnodes}\\
When this boolean variable is set, node names in device and subcircuit
call lines will be parameter expanded as the circuit is read in.  In
4.1.12 and later, node names are not parameter expanded by default, to
save processing time and avoid unintended matches causing errors. 
This variable can be set for backward compatibility, for files that
actually used this feature.

\index{plot\_catchar variable}
\item{\et plot\_catchar}\\
One can specify a fully qualified vector name as input to {\WRspice},
where the default syntax is
\begin{quote}
{\it plotname\/}{\vt .}{\it vectorname}
\end{quote}

The character used to separate the {\it plotname} from the {\it
vectorname}, which defaults to a period (`{\vt .}'), can be changed
with this variable.  If this variable is set to a single-character
string, then that character becomes the separation character.

\index{spec\_catchar variable}
\item{\et spec\_catchar}\\
By default, vector names that begin with the character `{\vt @}' are
interpreted as ``special'' vectors that provide the value of a model,
device, or circuit parameter.  These have forms like

\begin{quote}
{\vt @}{\it devicename\/}[{\it paramname\/}] for a device parameter,\\
{\vt @}{\it modelname\/}[{\it paramname\/}] for a model parameter, or\\
{\vt @}{\it paramname\/} for a circuit parameter.
\end{quote}

The character used to indicate a special vector can be changed from
the default `{\vt @}' with this variable.  If this variable is set to
a single-character string, then that character is used to indicate a
special vector.

\index{strictnumparse variable}
\item{\et strictnumparse}\\
When this variable is set, {\WRspice} will not allow trailing
characters after a number, unless they are separated from the number
with an underscore (`\_').  This may prevent errors, for example
writing ``{\vt 1meter}'' and expecting it to have a value of 1.

\index{subc\_catchar variable}
\item{\et subc\_catchar}\\
When {\WRspice} processes an input circuit containing subcircuits, it
internally generates a ``flat'' representation of the circuit through
subcircuit expansion.  All subcircuit calls are replaced with the
subcircuit body text, and the node and device names in the subcircuit
are given new names that are unique in the overall circuit.  One can
view this flattened representation with the {\cb listing e} command.

This variable can be set to a string consisting of a single
punctuation character, which will be used as the field separation
character in names generated in subcircuit expansion.  It should be a
character that is not likely to confuse the expression parser.  This
requirement is rather ambiguous, but basically means that math
operators, comma, semicolon, and probably others should be avoided.

In release 3.2.15 and later the default is `{\vt .}' (period), which
is also used in HSPICE, and provides nice-looking listings. 

In releases 3.2.5 -- 3.2.14, the default was `{\vt \_}' (underscore).

In release 3.2.4 and earlier, and in SPICE3, the concatenation
character was `{\vt :}' (colon).

This variable can appear in a {\vt .options} line in SPICE input,
where is will set the concatenation character used for the circuit. 
See also the description of the {\et subc\_catmode} variable below.

\index{subc\_catmode variable}
\item{\et subc\_catmode}\\
When {\WRspice} processes an input circuit containing subcircuits, it
internally generates a ``flat'' representation of the circuit through
subcircuit expansion.  All subcircuit calls are replaced with the
subcircuit body text, and the node and device names in the subcircuit
are given new names that are unique in the overall circuit.  One can
view this flattened representation with the {\cb listing e} command.

Previous {\WRspice} versions used the SPICE3 algorithm for generating
the new node and device names.  Release 3.2.15 and later have a new,
simpler algorithm as the default, but support for the old algorithm is
retained.

This string variable can be set to one of the keywords ``{\vt
wrspice}'' or ``{\vt spice3}''.  It sets the encoding mode for
subcircuit node and device names.  In 3.2.15 and later, the ``{\vt
wrspice}'' mode is the default.  In earlier releases, only the ``{\vt
spice3}'' mode was available.

A detailed discussion of the two mapping modes is provided in the
description of subcircuit expansion in \ref{subexpand}.

Typically, the user may not know or care about subcircuit mapping
details, however in some SPICE input it may be necessary to reference
subcircuit nodes in {\vt .save} lines and elsewhere.  In this case
knowledge of, and control of, the mapping employed is necessary.

There is also a compatibility issue with older {\WRspice} input files
that explicitly reference subcircuit nodes, as both the default
renaming algorithm and concatenation character have changed as
{\WRspice} evolved.  The format of the subcircuit node names depends
on the algorithm, so SPICE input that explicitly references subcircuit
node names implicitly assuming a certain mapping algorithm will
require either changes to the node names, or specification of the
matching algorithm and concatenation character.  Such files can be
easily updated to be compatible with newer {\WRspice} releases, but
some familiarity with the renaming modes is needed.

This variable can appear in a {\vt .options} line in SPICE input,
where is will set the name mapping algorithm used for the circuit. 
Typically, to ``fix'' an old input file, one would add a {\vt
.options} line specifying the {\vt spice3} mapping algorithm, and
either the colon or underscore (as appropriate) for the concatenation
character.

\index{subend variable}
\item{\et subend}\\
This variable allows the keyword which ends a subcircuit definition
to be changed.  If unset, the keyword is ``{\vt .ends}''.

\index{subinvoke variable}
\item{\et subinvoke}\\
This variable allows the prefix which invokes a subcircuit to be
changed.  If unset, the prefix is ``{\vt x}''.

\index{substart variable}
\item{\et substart}\\
This variable allows the keyword which begins a subcircuit definition
to be changed.  If unset, the keyword is ``{\vt .subckt}''.  The
equivalent ``{\vt .macro}'' keyword applies whether or not this
variable is set.

\index{submaps variable}
\item{\et submaps}\\
This is a string which can be set to a list of tokens of the form {\it
name\/}[{\vt ,}{\it value\/}], separated by space.  The square
brackets indicate that the value part and delimiting comma are
optional.

Before subcircuit expansion, if a line starts with {\vt x}{\it name}
({\vt x} followed by a {\it name} given in the option), then if the
corresponding {\it value} is given it will replace {\vt x}{\it name}. 
If no {\it value} was given, the {\vt x} is simply stripped off.  This
is all case insensitive.

{\bf Example}:  {\vt set submaps j,b}\\
In the deck, ``{\vt xj1 1 2 ...}'' would be replaced by ``{\vt b1 1 2
...}''.

This is fairly obscure, but may be useful for reading HSPICE netlists
that contain Verilog-A devices.  HSPICE uses ``{\vt X}'' for these,
{\WRspice} maps them to a standard letter for the device type.

\index{units\_catchar variable}
\item{\et units\_catchar}\\

The units concatenation character may be used in the units string to
identify the start of the units string, and to identify the start of
the denominator units.  The units separation character (see below) can
also be used to indicate the start of denominator units.  See the
section about input numerical format and the units string
(\ref{units}) for a complete syntax description.  If not given, the
concatenation character is `{\vt \#}', but if this variable is set to
a string containing a single punctuation character, that character
will become the units concatenation character.

Examples:

\begin{tabular}{ll}
\vt 1.0\#F\#S &  1 Farad per second\\
\vt 1.0F\#S &   1 femtosecond (note that 'F' can
  be a multiplier or a unit!)\\
\vt 1.0FS &    1 femtosecond\\
\vt 1.0\#FS &   1 Farad-second\\
\vt 1.0S &     1 second\\
\vt 1.0\#S &    1 second\\
\vt 1.0\#\#S &   1 Hertz\\
\end{tabular}

\index{units\_sepchar variable}
\item{\et units\_sepchar}\\

The units separation character may be used in the units string to
identify the start of the denominator units.  The units concatenation
character can also be used to indicate the start of denominator units. 
See the section about input numerical format and the units string
(\ref{units}) for a complete syntax description.  If not given, the
separation character is `{\vt \_}' (underscore), but if this variable
is set to a string containing a single punctuation character, that
character will become the units separation character.

\index{var\_catchar variable}
\item{\et var\_catchar}\\
When expanding shell variables, i.e. replacing forms like ``{\vt
\$var}'' in {\WRspice} input with the value that has been assigned to
{\vt var}, it is sometimes useful to use the ``concatenation
character'', which defaults to `{\vt \%}', to separate the variable
name from surrounding text.

For example, if ``{\vt set one = 1}'' is active, then ``{\vt
\$one\%k}'' will expand to ``{\vt 1k}''.  Note that it is also
possible to use the form ``{\vt \{\$one\}k}'' to achieve the same
objective.

The same applies when expanding parameters in SPICE input, using
definitions from a {\vt .param} line.  If one has ``{\vt .param
one=1}'' in scope, then ``{\vt one\%k}'' expands to ``{\vt 1k}''.

This variable allows the default concatenation character `{\vt \%}' to
be changed.  If this variable is set to a single-character string,
then that character becomes the concatenation character.
\end{description}

% spVars_sim.hlp:batch_vars 102011
%SU-------------------------------------
\subsection{Batch Mode Option Variables}
\label{batchvars}

The following variables are mostly familiar from Berkeley SPICE2, and
are used by {\WRspice} when running in batch mode.  Generally, these
would be included in a {\vt .options} line in the SPICE input file. 
They have no effect when running {\WRspice} interactively.

\begin{description}
\index{acct variable}
\item{\et acct}\\
When {\WRspice} is run in batch mode, print out resource usage
information at the end of the run, similar in format to the output of
the {\vt rusage all} command.  This boolean variable has meaning only
when set in the input file in a {\vt .options} line.

\index{dev variable}
\item{\et dev}\\
This option variable is unique to {\WRspice}.  When given, a listing
of all device instances and parameters is printed in the batch output,
in a format similar to the output of the ``{\vt show -d *}'' command. 
This boolean variable has meaning only when set in the input file in a
{\vt .options} line.

\index{list variable}
\item{\et list}\\
When {\WRspice} is run in batch mode, print a circuit listing before
running the simulation.  This boolean variable has meaning only when
set in a {\vt .options} line of the input file.

\index{mod variable}
\item{\et mod}\\
This option variable is unique to {\WRspice}.  Logically, it is the
inversion of the SPICE2 {\vt nomod} option, if given a listing of
device models and parameters is added to batch output.  The format is
similar to the output of the ``{\vt show -m *}'' command.  This
boolean variable has meaning only when set in a {\vt .options} line
of the input file.

\index{node variable}
\item{\et node}\\
The SPICE2 variable to print a node summary.  When given, a list of
the node voltages and branch currents after dc operating point
analysis is printed.  The values are printed whether or not operating
point analysis succeeds.  This boolean variable has meaning only when
set in the {\vt .options} line of the input file.

\index{opts variable}
\item{\et opts}\\
When {\WRspice} is run in batch mode, print out all the variables set and
their values.  This boolean variable has meaning only when set in the
{\vt .options} line of the input file.

\index{post variable}
\item{\et post}\\
This option variable is similar to the {\vt post} option of HSPICE. 
It must be set to one of the following literal keywords.

\begin{description}
\item{\vt post=csdf}\\
In batch mode, if no rawfile ({\vt -r} option) was specified on the
{\WRspice} command line, a CSDF file will be produced for the batch
run.  The name of the file will be that of the input file suffixed
with ``{\vt .csdf}'' if the input file name is known, or ``{\vt
unknown.csdf}'' if the input file name can't be determined.

\item{\vt post=raw}\\
In batch mode, if no rawfile ({\vt -r} option) was specified on the
{\WRspice} command line, a rawfile will be produced for the batch run. 
The name of the file will be that of the input file suffixed with
``{\vt .raw}'' if the input file name is known, or ``{\vt
unknown.raw}'' if the input file name can't be determined.
\end{description}
\end{description}

% spVars_sim.hlp:unused_vars 102011
%SU-------------------------------------
\subsection{Unused Option Variables}

The following variables have no significance to {\WRspice}, but were
used in Berkeley SPICE2 and thus may be present in input files.  These
are silently ignored by {\WRspice}.

\begin{description}
\index{cptime variable}
\item{\et cptime}\\
The SPICE2 option to set the maximum allowable CPU time for the job.
This has no effect in {\WRspice}.

\index{itl3 variable}
\item{\et itl3}\\
The SPICE2 option to set the lower transient iteration limit for
timestep control.  This is not used in {\WRspice}.

\index{itl5 variable}
\item{\et itl5}\\
The SPICE2 option to set the maximum number of iterations for the job. 
This is not used in {\WRspice}.

\index{limpts variable}
\item{\et limpts}\\
The SPICE2 variable which sets the maximum number of points per
analysis.  This is not used in {\WRspice}.

\index{limtim variable}
\item{\et limtim}\\
The SPICE2 option to reserve time for output generation.  This is not
used in {\WRspice}.
 
\index{lvlcod variable}
\item{\et lvlcod}\\
The SPICE2 option to generate machine code.  This is not used in
{\WRspice}.

\index{lvltim variable}
\item{\et lvltim}\\
The SPICE2 variable to set the type of timestep control.  This is not
used in {\WRspice}.

\index{nomod variable}
\item{\et nomod}\\
The SPICE2 variable to suppress printing of a summary of models.  This
is not used in {\WRspice}.

\end{description}

%SU-------------------------------------
\subsection{Debugging Variables}

% spVars_debug.hlp:debug_vars 073015

These variables turn on debugging modes and otherwise provide
debugging utility.  Most of these variables can be set indirectly from
the {\cb Debug OPtions} tool from the {\cb Debug} button in the {\cb
Tools} menu of the {\cb Tool Control} window.

\begin{description}
\index{debug variable}
\item{\et debug}\\
This variable may be a boolean (i.e., set to nothing), in which case
all debugging is turned on, a string token from the list below, in
which case the string specifies which part of the program to enable
debugging for, or a list of these strings, which enables any
combination.  The possible values are:

\begin{tabular}{|l|l|}\hline
\vt async & The {\et aspice} and {\et rspice} code\\ \hline
\vt control & The control structure code\\ \hline
\vt cshpar & The C-shell pre-processor and parser\\ \hline
\vt eval & The expression evaluation routines\\ \hline
\vt ginterface & Graphics package interface routines\\ \hline
\vt helpsys & The help system\\ \hline
\vt plot & The plotting routines\\ \hline
\vt parser & The parser for expressions\\ \hline
\vt siminterface & The interface to the simulator\\ \hline
\vt vecdb & The vector database\\ \hline
\end{tabular}

\index{display variable}
\item{\et display}\\
This variable contains the display name for X used by the graphics
system, generally of the form {\it host\/}:{\it number\/}.  This
variable is read-only.

\index{dontplot variable}
\item{\et dontplot}\\
This variable disables the plotting system for debugging purposes. 
When this variable is set, and a {\et plot} command is given, no
graphical operations are performed.

\index{nosubckt variable}
\item{\et nosubckt}\\
This variable disables the expansion of subcircuits when set, for
debugging purposes.  A circuit with subcircuits cannot be parsed if
this is set.

\index{program variable}
\item{\et program}\\
This variable contains the full path name of the program.

\index{trantrace variable}
\item{\et trantrace}\\
This can take integer values 0--2, a value 0 is the same as if unset. 
When set to 1 or 2, a message is printed at every internal time point
during transient analysis, providing information about the predicted
and used time step, integration order, convergence testing results,
and breakpoints.  The value 2 is more verbose than 1.

Also, for values 1 and 2 equivalently, the operating point analysis is
traced, with iteration counts, step values and other information
printed.  This is done for any operating point analysis, for transient
analysis or not.
\end{description}

